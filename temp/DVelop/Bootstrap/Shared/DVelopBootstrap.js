function DVelopBootstrapPanel(n){this.control=n;this.containerName=n.ContainerName;this.header=n.ShowHeader;this.title=n.Title;this.render=function(){var o,l,e,s,i,r,b,a,y,c,u,k,v,p,d,f,h,n,w,g,nt,t;if(this.control.Collapsed=WWP_FixBooleanProperty(this.control.Collapsed),this.control.Collapsible=WWP_FixBooleanProperty(this.control.Collapsible),this.control.ShowCollapseIcon=WWP_FixBooleanProperty(this.control.ShowCollapseIcon),this.control.AutoScroll=WWP_FixBooleanProperty(this.control.AutoScroll),this.control.AutoWidth=WWP_FixBooleanProperty(this.control.AutoWidth),this.control.AutoHeight=WWP_FixBooleanProperty(this.control.AutoHeight),o=document.createElement("div"),o.id="DVelopBootstrapPanel_"+this.containerName,o.className="panel",this.control.Cls&&(o.className+=" "+this.control.Cls),this.header){if(l=document.createElement("div"),l.id="PanelHeader_"+this.containerName,l.className="panel-heading",this.control.Cls&&(l.className+=" "+WWP_replaceAll(WWP_replaceAll(WWP_replaceAll(this.control.Cls.trim(),"  "," "),"  "," ")+" "," ","_Header ").trim()),e=document.createElement("h3"),e.className="panel-title",s=document.createElement("span"),s.id="Title_"+this.containerName,this.control.TitleType!="HTML"?s.innerText=gx.getMessage(this.title):s.innerHTML=gx.getMessage(this.title),this.control.Collapsible){if(i=document.createElement("a"),i.href="#PanelBody_"+this.containerName,i.className="accordion-toggle",i.setAttribute("data-parent","#PanelHeader_"+this.containerName),navigator.appVersion.toLowerCase().match("msie 8")||navigator.appVersion.toLowerCase().match("msie 7")||navigator.appVersion.toLowerCase().match("msie 9")||i.setAttribute("data-toggle","collapse"),r=this.containerName,b=this,i.onclick=function(){$(this)[$("#PanelBody_"+r).hasClass("in")?"addClass":"removeClass"]("collapsed");$("#PanelBody_"+r).hasClass("in")?($("#"+r).addClass("main-panel-collapsed"),$("#PanelBody_"+r).collapse("hide"),b.control.Collapsed=!0):($("#"+r).removeClass("main-panel-collapsed"),$("#PanelBody_"+r).collapse("show"),b.control.Collapsed=!1);$("#"+r).parent().is("td")&&(navigator.appVersion.toLowerCase().match("msie 8")||navigator.appVersion.toLowerCase().match("msie 7"))&&$(function(){$("#"+r).parent().height($("#"+r).height());$("#"+r).parent().css("vertical-align","top")});b.control.Collapsed||typeof SetMinWidthPaginationBars!="function"||SetMinWidthPaginationBars()},this.control.OnTitleClick)$(i).on("click",this.control.OnTitleClick);this.control.Collapsed&&(i.className+=" collapsed",$("#"+r).addClass("main-panel-collapsed"));this.control.ShowCollapseIcon?(a=document.createElement("div"),a.className="toggle-container",y=document.createElement("div"),y.id="Toggle_"+this.containerName,y.className="toggle-icon",i.appendChild(y),a.appendChild(i),this.control.IconPosition=="right"?(s.className="left",y.className+=" toggle-icon-right",e.appendChild(s),e.appendChild(a)):(this.title!=""&&(a.className+=" left"),e.appendChild(a),e.appendChild(s))):(i.appendChild(s),e.appendChild(i));l.appendChild(e)}else e.appendChild(s),l.appendChild(e);o.appendChild(l)}if(c=document.createElement("div"),c.id="PanelBody_"+this.containerName,c.className="panel-collapse",this.control.AutoScroll&&(c.className+=" panel-autoscroll"),this.control.Cls&&(c.className+=" "+WWP_replaceAll(WWP_replaceAll(WWP_replaceAll(this.control.Cls.trim(),"  "," "),"  "," ")+" "," ","_Body ").trim()),c.className+=this.control.Collapsed?" collapse":" in",u=document.getElementById(this.containerName+"Body"),u||(k=this.control.getContainerControl().nextSibling,$(k).hasClass("gx_usercontrol_child")&&(v=k.id,p=this.control.getContainerControl().id,(WWP_startsWith(v,p)||v.length>5&&WWP_endsWith(p,v.substring(v.length-5))&&WWP_startsWith(v,p.substr(0,p.length-5)))&&(u=k))),u||(d=this.containerName.substring(this.containerName.length-5),u=document.getElementById(this.containerName.substring(0,this.containerName.length-5)+"Body"+d)),u&&(u.className="panel-body",u.style.display="block",c.appendChild(u)),o.appendChild(c),$("#"+this.containerName).addClass("panel-group"),$("#"+this.containerName).append(o),this.control.AutoWidth||(f=this.control.Width,f.substring(f.length-1)=="%"?(o.style.width=f,$("#"+this.containerName).width(f)):o.style.width=f.substring(f.length-2)=="px"?f:f+"px"),this.control.AutoHeight||(h=this.control.Height,h.substring(h.length-1)=="%"?(u.style.height=h,$("#"+this.containerName).height(h)):u.style.height=h.substring(h.length-2)=="px"?h:h+"px"),this.control.Collapsible&&(this.control.AutoWidth||f.substring(f.length-1)=="%")){n=this;w=this.control.Width;this.control.Width.substring(this.control.Width.length-2)!="px"&&this.control.Width.substring(this.control.Width.length-1)!="%"&&(w=w+"px");g=!this.control.AutoWidth;$(window).on("load",function(){var t=$("#PanelBody_"+n.containerName),u,i,r;if($("#PanelBody_"+n.containerName).width()<=0)if(g)$("#PanelHeader_"+n.containerName).css("width",w);else{if(u=$("#PanelBody_"+n.containerName).parent(),t.appendTo("body"),$("#PanelHeader_"+n.containerName).width()<t.width()){i=parseInt($("#PanelHeader_"+n.containerName).css("padding-left"))+parseInt($("#PanelHeader_"+n.containerName).css("padding-right"));r=t.width()-i;$("#PanelHeader_"+n.containerName).width(r);$(window).on("resize",function(){var i=parseInt($("#PanelHeader_"+n.containerName).css("padding-left"))+parseInt($("#PanelHeader_"+n.containerName).css("padding-right")),r=t.width()-i;$("#PanelHeader_"+n.containerName).width(r)})}$("#PanelBody_"+n.containerName).remove();u.append(t)}else if($("#PanelHeader_"+n.containerName).width()<t.width())if($(window).width()-($("#"+n.containerName).position().left+t.width())<20)$("#PanelHeader_"+n.containerName).css("width",w);else{var t=$("#PanelBody_"+n.containerName),i=parseInt($("#PanelHeader_"+n.containerName).css("padding-left"))+parseInt($("#PanelHeader_"+n.containerName).css("padding-right")),r=t.width()-i;$("#PanelHeader_"+n.containerName).width(r);$(window).on("resize",function(){var t=$("#PanelBody_"+n.containerName),i=parseInt($("#PanelHeader_"+n.containerName).css("padding-left"))+parseInt($("#PanelHeader_"+n.containerName).css("padding-right")),r=t.width()-i;$("#PanelHeader_"+n.containerName).width(r)})}})}nt=this.control;t=this.containerName;$(function(){var n=$("#"+t+" a.change-action").each(function(){$(this).click(function(){$("#DVelopBootstrapPanel_"+t).css("overflow","visible");$("#PanelBody_"+t).css("overflow","visible");$(".PopupBorder .PopupContent :button").each(function(){$(this).click(function(){$("#DVelopBootstrapPanel_"+t).css("overflow","");$("#PanelBody_"+t).css("overflow","")})});$(".PopupBorder .PopupHeaderButton").each(function(){$(this).click(function(){$("#DVelopBootstrapPanel_"+t).css("overflow","");$("#PanelBody_"+t).css("overflow","")})})})});nt.AutoScroll||$("#"+t).find(".dropdown-toggle").each(function(){$(this).click(function(){$(this).parent().hasClass("open")?$("#DVelopBootstrapPanel_"+t).css("overflow")=="visible"&&$("#DVelopBootstrapPanel_"+t).get(0).getAttribute("setH")=="T"&&($("#DVelopBootstrapPanel_"+t).css("overflow","hidden"),$("#DVelopBootstrapPanel_"+t).get(0).removeAttribute("setH")):$("#DVelopBootstrapPanel_"+t).css("overflow")=="hidden"&&($("#DVelopBootstrapPanel_"+t).get(0).setAttribute("setH","T"),$("#DVelopBootstrapPanel_"+t).css("overflow","visible"))});$("*").click(function(n){$(n.target.offsetParent).hasClass("dropdown-toggle")||$(n.target).hasClass("dropdown-toggle")||$("#DVelopBootstrapPanel_"+t).css("overflow")=="visible"&&$("#DVelopBootstrapPanel_"+t).get(0).getAttribute("setH")=="T"&&($("#DVelopBootstrapPanel_"+t).css("overflow","hidden"),$("#DVelopBootstrapPanel_"+t).get(0).removeAttribute("setH"))})})})};this.refresh=function(){$("#Title_"+this.containerName).html(gx.getMessage(this.control.Title))}}function DVelopBootstrapTabs(n){this.control=n;this.containerName=n.ContainerName;this.designTabs=JSON.parse(n.DesignTimeTabs);this.tabs=[];this.tabCount=0;this.openTabsCount=0;this.designTabs!=undefined&&this.designTabs.length!=undefined&&(this.tabCount=this.designTabs.length);for(var t=0;t<this.tabCount;t++)this.tabs[t]=new BootstrapTab(this.designTabs[t].id,this.containerName),this.openTabsCount+=1;this.render=function(){var n=document.createElement("ul"),e,s,c,v,o,i,h,l,t,u,a,f;for(n.id="DVelopBootstrapTabsContainer_"+this.containerName,n.className="nav nav-tabs",this.control.Cls&&(n.className+=" "+this.control.Cls),e=document.createElement("table"),e.className="tabs-table",s=document.createElement("div"),s.id="DVelopBootstrapTabsContent_"+this.containerName,s.className="tab-content",this.TabContainer=n,this.TabContent=s,this.TabsTable=e,c=0;c<this.tabCount;c++)v=this.designTabs[c],this.RenderTab(n,s,e,c,v,!1);if(o=$("#"+this.containerName),this.control.AutoWidth||(o.width(this.control.Width),e.style.width=this.control.Width.substring(this.control.Width.length-1)=="%"||this.control.Width.substring(this.control.Width.length-2)=="px"?this.control.Width:this.control.Width+"px"),this.control.AutoScroll?o.addClass("tab-container-scroll"):o.addClass("tab-container"),this.tabCount==0&&o.addClass("Tabs_NoTabs"),i=WWP_IsRTL(),i&&o.addClass("Tabs_RTL"),r=document.createElement("tr"),h=document.createElement("td"),l=this.control.ExcessiveTabsBehavior=="Slider",l?(t=document.createElement("div"),t.innerHTML='<div class="moveLeft"><div class="moveLeftArrow"><\/div><\/div><div class="moveRight"><div class="moveRightArrow"><\/div><\/div>',t.className="tabsSlider",t.appendChild(n),this.control.IncludeOptionsMenu?(u=document.createElement("div"),u.className="tabsMainContainer",u.innerHTML='<div class="dropdown tabsNavOptions dropdown-right"><button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown"><span class="caret"><\/span><\/button><ul class="dropdown-menu"><li><a href="#" closeOther><span>'+gx.getMessage(this.control.CloseOtherTabs)+'<\/span><\/a><\/li><li><a href="#" closeAll><span>'+gx.getMessage(this.control.CloseAllTabs)+"<\/span><\/a><\/li><\/ul>",u.appendChild(t),h.appendChild(u),$(u).find(".tabsNavOptions").on("shown.bs.dropdown",function(){return function(){WWP_ddo_invertPosition($(u).find("ul")[0],$(u).find("button")[0])}}(this)).find("[closeAll]").click(function(){$(n).find(".close.closeTab").click()}),$(u).find("[closeOther]").click(function(){$(n).find("li:not(.active) .close.closeTab").click()})):h.appendChild(t)):h.appendChild(n),h.appendChild(s),r.appendChild(h),e.appendChild(r),o.append(e),a=i?"right":"left",f=this,l){$(t).find(">.moveRight").click(function(){var u=null,s=$(n).find(">li:last-child()"),h=WWP_TabsLIPositionRight(i,s),r=$(n).find(">li:first-child()"),e=$(t).width(),o=parseInt($(n).css(a),10),c=$(n).find(">li").length;$(n).find(">li").each(function(){return(u==null&&WWP_TabsLIPositionLeft(i,$(this))>=o*-1&&(u=$(this)),f.ForceShowSelectedLI&&$(this).hasClass("active"))?(r=$(this),!1):!f.ForceShowSelectedLI&&e-o-($(this).index()<c-1?$(t).find(">.moveRight").width():0)<WWP_TabsLIPositionRight(i,$(this))||e-$(t).find(">.moveLeft").width()-1>=h-WWP_TabsLIPositionLeft(i,$(this))?(r=$(this),!1):void 0});r[0]==u[0]&&r.next().length==1&&(r=r.next());f.SliderMoveTo(t,r,i)});$(t).find(">.moveLeft").click(function(){var e,s,o,r,h;if(f.ForceShowSelectedLI)r=$(n).find(">li.active"),e=$(n).find(">li:last-child()"),r[0]==e[0]&&(s=WWP_TabsLIPositionRight(i,e),o=$(t).width(),$(n).find(">li").each(function(){if(o-$(t).find(">.moveLeft").width()-1>=s-WWP_TabsLIPositionLeft(i,$(this)))return r=$(this),!1})),f.SliderMoveTo(t,r,i);else{var u=$(n).find(">li:first-child()"),o=$(t).width(),c=parseInt($(n).css(a),10);$(n).find(">li").each(function(){if(WWP_TabsLIPositionLeft(i,$(this))>=c*-1)return u=$(this),!1});u!=null&&(r=$(n).find(">li:first-child()"),h=$(n).find(">li").length,$(n).find(">li").each(function(){if(WWP_TabsLIPositionLeft(i,$(this))+o-($(this).index()>0?$(t).find(">.moveLeft").width():0)-($(this).index()<h-1?$(t).find(">.moveRight").width():0)>WWP_TabsLIPositionLeft(i,u))return r=$(this),!1}),r[0]==u[0]&&r.prev().length==1&&(r=r.prev()),f.SliderMoveTo(t,r,i))}});$(n).on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){f.UpdateSlider()})}$(function(){f.loadTabHeaders()})};this.SliderMoveTo=function(n,t,i){this.ForceShowSelectedLI=!1;var r=WWP_TabsLIPositionLeft(i,t)*-1;r<0&&(r+=$(n).find(">.moveLeft").width());$(n).toggleClass("NeedSliderLeft",r<0);$(this.TabContainer).css(i?"right":"left",r+"px")};this.UpdateSlider=function(){var t=WWP_IsRTL(),i=parseInt($(this.TabContainer).css(t?"right":"left"),10),n=$(this.TabContainer).parent(),r=!$("#"+this.containerName).hasClass("Tabs_NoTabs"),u;r?(n.length>0&&(n.toggleClass("NeedSliderRight",r&&n.width()-i<WWP_TabsLIPositionRight(t,$(this.TabContainer).find(">li:last-child()"))),n.toggleClass("NeedSliderLeft",r&&i<0)),this.ForceShowSelectedLI&&(u=$(this.TabContainer).find(">li.active"),n.width()-i<WWP_TabsLIPositionRight(t,u)?$(this.TabContainer).parent().find(">.moveRight").click():i<WWP_TabsLIPositionLeft(t,u)*-1?$(this.TabContainer).parent().find(">.moveLeft").click():this.ForceShowSelectedLI=!1)):(n.toggleClass("NeedSliderRight",!1),n.toggleClass("NeedSliderLeft",!1))};this.RenderTab=function(n,t,i,r,u,f){var l=!1,h,s,c,o,e;this.control.SelectedTabIndex==r&&(l=!0);h=document.createElement("li");h.id=this.containerName+"_"+u.id;s=document.createElement("a");s.href="#"+this.containerName+u.id;s.setAttribute("data-toggle","tab");f&&(c=document.createElement("div"),c.setAttribute("id",this.containerName+"Title"+u.id),c.style.display="block",s.appendChild(c));(navigator.appVersion.toLowerCase().match("msie 8")||navigator.appVersion.toLowerCase().match("msie 7"))&&(s.style.minHeight="22px");o=document.getElementById(this.containerName+u.id);o.style.display="";o.className="tab-pane fade";this.control.AutoHeight||(e=this.control.Height,e.substring(e.length-1)=="%"||e.substring(e.length-2)=="px"?(o.style.height=e,i.style.height=e):(o.style.height=e+"px",i.style.height=e+"px"));l&&(this.setActiveTabId(u.id),h.className="active",o.className+=" active in");h.appendChild(s);n.appendChild(h);t.appendChild(o)};this.loadTabHeaders=function(){for(var f,e,n,r=0,t=0;t<this.tabCount;t++){var n=this.getTab(this.designTabs[t].id),u=$("#"+this.containerName+"_"+n.id+" a:first-child"),i=$("#"+this.containerName+"Title"+n.id);i.css("display","block");i.height()>r&&(r=i.height());u.append(i);n.title!=""&&n.setTitle(n.title,!1,this);n.show||n.hideTab();f=this;e=n.id;u.on("click",function(n){return function(){f.setActiveTabId(n)}}(e));if(this.control.TabClicked)u.on("click",this.control.TabClicked)}for(t=0;t<this.tabCount;t++)n=this.getTab(this.designTabs[t].id),n.setHeightToTab(r);$("#"+this.containerName).parent().is("td")&&(navigator.appVersion.toLowerCase().match("msie 8")||navigator.appVersion.toLowerCase().match("msie 7"))&&($("#"+this.containerName).parent().css("_min-height: auto !important;"),$("#"+this.containerName).parent().css("_height: auto !important;"))};this.setActiveTabId=function(n){this.control.ActiveTabId=n;$("#"+this.containerName).parent().is("td")&&(navigator.appVersion.toLowerCase().match("msie 8")||navigator.appVersion.toLowerCase().match("msie 7"))&&($("#"+this.containerName).parent().css("_min-height: auto !important;"),$("#"+this.containerName).parent().css("_height: auto !important;"))};this.setActiveTabWhenHideClose=function(n){var i=this.getTabIndex(n),t;if(i!=null){for(t=i+1;t<this.openTabsCount;t++)if(this.tabs[t].show&&!this.tabs[t].closed){this.SelectTab(this.tabs[t].id);return}for(t=i-1;t>=0;t--)if(this.tabs[t].show&&!this.tabs[t].closed){this.SelectTab(this.tabs[t].id);return}}for(t=0;t<this.openTabsCount;t++)if(i!=t&&this.tabs[t].show&&!this.tabs[t].closed){this.SelectTab(this.tabs[t].id);break}};this.getTab=function(n){for(var t=0;t<this.openTabsCount;t++)if(n==this.tabs[t].id)return this.tabs[t];return null};this.getTabIndex=function(n){for(var t=0;t<this.openTabsCount;t++)if(n==this.tabs[t].id)return t};this.setTabTitle=function(n,t){var i=this.getTab(n);i&&i.setTitle(t,!1,this)};this.setIFrameTabTitle=function(n,t){var i=this.getTab(n);i&&i.setTitle(t,!0,this)};this.GetIFrameTabIdByUrl=function(n){var i,t,r;if(this.IFrameId!=null){for(i=1;i<=this.IFrameId;i++)if(t=document.getElementById(this.containerName+"IFrameTab"+i),t!=null&&t.childNodes.length>0&&t.childNodes[0].tagName=="IFRAME"&&(t.childNodes[0].getAttribute("src")==n||WWP_endsWith(t.childNodes[0].getAttribute("src"),"/"+n)))return"IFrameTab"+i;if(r=WWP_transformParametersStyleToPositional(n),r!=n)return this.GetIFrameTabIdByUrl(r)}return null};this.HasIFrameTab=function(){if(this.IFrameId!=null)for(var n=1;n<=this.IFrameId;n++)if(document.getElementById(this.containerName+"IFrameTab"+n))return!0;return!1};this.UpdateIFrameTabCaption=function(n,t){var i=this.GetIFrameTabIdByUrl(n);i!=null&&(this.setIFrameTabTitle(i,t),this.control.ExcessiveTabsBehavior=="Slider"&&(this.ForceShowSelectedLI=!0,this.UpdateSlider()))};this.ReplaceIFrameTab=function(n,t,i){var f=this.GetIFrameTabIdByUrl(n),u,r;if(f!=null){u=document.getElementById(this.containerName+f);u.removeChild(u.childNodes[0]);r=document.createElement("iframe");r.setAttribute("src",t);r.urlHist=[];$(r).on("load",function(){this.WWPUtils!=null&&this.WWPUtils.updateCurrentTab_ReturnUrl();this.urlHist.push(this.contentWindow.location+"")});u.appendChild(r);r.onload=function(){$(this.contentDocument).find("html").addClass("TabsIFrame")};this.setIFrameTabTitle(f,i);this.control.ExcessiveTabsBehavior=="Slider"&&(this.ForceShowSelectedLI=!0,this.UpdateSlider())}};this.CloseIFrameTab=function(n){var t=this.GetIFrameTabIdByUrl(n);t!=null&&(this.removeIFrameTab(t),this.control.ExcessiveTabsBehavior=="Slider"&&(this.ForceShowSelectedLI=!0,this.UpdateSlider()))};this.addIFrameTab=function(n,t){var u,r,e,o,h;if(this.IFrameId==null)this.IFrameId=0;else if(u=this.GetIFrameTabIdByUrl(n),u!=null){this.SelectTab(u);this.control.ExcessiveTabsBehavior=="Slider"&&(this.ForceShowSelectedLI=!0,this.UpdateSlider());return}this.IFrameId++;$("#"+this.containerName).removeClass("Tabs_NoTabs");var s={id:"IFrameTab"+this.IFrameId},i=s.id,f=document.createElement("div");f.setAttribute("id",this.containerName+i);r=document.createElement("iframe");r.setAttribute("src",n);r.urlHist=[];$(r).on("load",function(){this.WWPUtils!=null&&this.WWPUtils.updateCurrentTab_ReturnUrl();this.urlHist.push(this.contentWindow.location+"")});f.appendChild(r);r.onload=function(){$(this.contentDocument).find("html").addClass("TabsIFrame")};this.TabContent.appendChild(f);this.RenderTab(this.TabContainer,this.TabContent,this.TabsTable,-1,s,!0);e=new BootstrapTab(i,this.containerName);this.tabs[this.openTabsCount]=e;this.openTabsCount+=1;e.setTitle(t,!0,this);this.SelectTab(i);this.setActiveTabId(i);o=$("#"+this.containerName+"_"+i+" a:first-child");h=this;o.on("click",function(n){return function(){h.setActiveTabId(n)}}(i));if(this.control.TabClicked)o.on("click",this.control.TabClicked);this.control.ExcessiveTabsBehavior=="Slider"&&(this.ForceShowSelectedLI=!0,this.UpdateSlider())};this.SelectTab=function(n){var t=this.getTab(n),i;t&&(t.show||t.showTab(),i=$("#"+this.containerName+"_"+t.id+" a:first-child"),i.trigger("click"))};this.showTab=function(n){var t=this.getTab(n);t&&t.showTab()};this.removeIFrameTab=function(n){var t,i;this.hideTabById(n);t=document.getElementById(this.containerName+n);t!=null&&t.parentNode.removeChild(t);i=document.getElementById(this.containerName+"_"+n);i!=null&&i.parentNode.removeChild(i);this.control.ActiveTabId==n&&this.setActiveTabWhenHideClose(n);this.designTabs!=null&&this.designTabs.length!=0||this.HasIFrameTab()||$("#"+this.containerName).addClass("Tabs_NoTabs");this.control.ExcessiveTabsBehavior=="Slider"&&(this.ForceShowSelectedLI=!0,this.UpdateSlider())};this.hideTabById=function(n){var t=this.getTab(n);t&&(t.hideTab(),this.control.ActiveTabId==n&&this.setActiveTabWhenHideClose(n))};this.hideTabByIndex=function(n){if(n<this.tabs.length){var t=this.tabs[n];t&&(t.hideTab(),this.control.ActiveTabId==t.id&&this.setActiveTabWhenHideClose(t.id))}}}function BootstrapTab(n,t){this.containerName=t;this.id=n;this.title="";this.show=!0;this.closed=!1;this.setTitle=function(n,t,i){var r,e,f,u,o,s;if(this.title=gx.getMessage(n),r=$("#"+this.containerName+"_"+this.id+" a:first-child span:first-child"),r.length!=0)r[0].childNodes.length>1?r.contents().filter(function(){return this.nodeType==Node.TEXT_NODE})[0].textContent=this.title:r.text(this.title);else if(e=$("#"+this.containerName+"Title"+this.id),e.length!=0&&(f=document.createElement("span"),f.innerText=this.title,e.prepend(f),t)){u=document.createElement("button");u.setAttribute("class","close closeTab");u.innerHTML="×";o=i;s=this.id;$(u).on("click",function(n){o.removeIFrameTab(s);n.preventDefault();n.stopPropagation()});f.appendChild(u)}};this.setHeightToTab=function(n){$("#"+this.containerName+"Title"+this.id).height(n)};this.showTab=function(){var n,t;this.show=!0;n=$("#"+this.containerName+"_"+this.id);n.css("display","block");t=$("#"+this.containerName+this.id);t.css("display","block")};this.hideTab=function(){var n,t;this.show=!1;n=$("#"+this.containerName+"_"+this.id);n.css("display","none");t=$("#"+this.containerName+this.id);t.css("display","none")};this.closeTab=function(){this.closed=!0}}function DVelopBootstrapConfirmPanel(n){this.control=n;this.containerName=n.ContainerName;this.render=function(){var i=$("#"+this.containerName),s,r,h,a,f,e,c,u,t,l,n;if(i.addClass("modal fade"),this.control.Class!=""&&i.addClass(this.control.Class),i.attr("tabindex","-1"),i.attr("role","dialog"),i.attr("aria-labelledby",this.containerName+"_Title"),i.attr("aria-hidden","true"),i.attr("data-backdrop","static"),s=document.createElement("div"),s.className="modal-dialog",r=document.createElement("div"),r.className="modal-content",h=document.createElement("div"),h.className="modal-header",a=this.createButton("CloseButton","close","&times",2),a.setAttribute("aria-hidden","true"),f=document.createElement("h4"),f.id=this.containerName+"_Title",f.className="modal-title",e=document.createElement("div"),this.control.TextType==1?f.innerText=gx.getMessage(this.control.Title):f.innerHTML=gx.getMessage(this.control.Title),c=document.createElement("span"),this.control.BodyType=="WebComponent"?(e.className="modal-body modal-body-wc",$(r).css({width:this.control.Width.trim()}),$(s).addClass("modal-dialog-wc")):(e.className="modal-body",c.id=this.containerName+"_ConfirmationText",this.control.TextType==1?c.innerText=gx.getMessage(this.control.ConfirmationText):c.innerHTML=gx.getMessage(this.control.ConfirmationText)),u=document.getElementById(this.control.BodyType!="WebComponent"&&this.control.BodyContentInternalName!=""?this.control.BodyContentInternalName:this.containerName+"Body"),u==null?(u=document.createElement("div"),u.id=this.containerName+"Body"):this.control.BodyType!="WebComponent"&&this.control.BodyContentInternalName!=""&&(this.BodyContentParent=u.parentElement),u.style.display="block",t=document.createElement("div"),l=this.control.ConfirmType!=""&&this.control.ConfirmType!="NoButtons",l){t.className="modal-footer";var w=this.createButton("SaveButton","btn btn-primary btn-yes-DVelop",this.control.YesButtonCaption,this.control.TextType),v,y,p=this.control.ConfirmType=="1"||this.control.ConfirmType=="YesNo",o=this.control.ConfirmType=="2"||this.control.ConfirmType=="YesNoCancel";(p||o)&&(v=this.createButton("DismissButton","btn btn-default btn-no-DVelop",this.control.NoButtonCaption,this.control.TextType));o&&(y=this.createButton("CancelButton","btn btn-default btn-cancel-DVelop",this.control.CancelButtonCaption,this.control.TextType));this.control.YesButtonPosition=="right"?(o&&t.appendChild(y),(p||o)&&t.appendChild(v),t.appendChild(w)):(t.appendChild(w),(p||o)&&t.appendChild(v),o&&t.appendChild(y))}h.appendChild(a);h.appendChild(f);this.control.BodyType!="WebComponent"&&e.appendChild(c);e.appendChild(u);r.appendChild(h);r.appendChild(e);l&&r.appendChild(t);s.appendChild(r);i.append(s);n=this;$(function(){var u=$("#"+n.containerName+"_CloseButton"),t,i,r;n.bindClickHandlers(u,"Close",null,n.control.Close);l&&(t=$("#"+n.containerName+"_SaveButton"),n.bindClickHandlers(t,"Yes",n.control.onYes,n.control.Close),(n.control.ConfirmType=="1"||n.control.ConfirmType=="2")&&(i=$("#"+n.containerName+"_DismissButton"),n.bindClickHandlers(i,"No",n.control.onNo,n.control.Close)),n.control.ConfirmType=="2"&&(r=$("#"+n.containerName+"_CancelButton"),n.bindClickHandlers(r,"Cancel",n.control.onCancel,n.control.Close)))})};this.createButton=function(n,t,i,r){var u=document.createElement("button");return u.id=this.containerName+"_"+n,u.className=t,u.setAttribute("type","button"),$(".modal.modal-loading").length==0&&u.setAttribute("data-dismiss","modal"),r==1?u.innerText=gx.getMessage(i):u.innerHTML=gx.getMessage(i),u};this.bindClickHandlers=function(n,t,i,r){var f=this,u=this;n.on("click",function(t){return function(){u.closeHandled||(u.closeHandled=!0,u.control.BodyType=="WebComponent"&&(t=$(n).data("close-result")||""),f.setResult(t),$(this).attr("data-dismiss")==null&&$("#"+u.containerName).modal("hide"),i&&i(),r&&u.control.BodyType!="WebComponent"&&r())}}(t))};this.setResult=function(n){this.control.Result=n};this.openModal=function(){var i=$("#"+this.containerName),f,r,n,t,e,u;if(this.control.BodyType=="WebComponent"||(f=i.data("bs.modal"),f==null||!f.isShown))if(i.off(),i.html(""),this.render(),r=$(".modal.modal-loading").length>0,n=this,this.control.BodyType=="WebComponent"){if(n.closeHandled=!1,t=null,!r){t=$("<div><\/div>");t.addClass("modal modal-loading fade");t.attr("tabindex","-2");t.attr("role","dialog");t.attr("aria-labelledby","Title");t.attr("aria-hidden","true");t.attr("data-backdrop","static");t.html('<div class="modal-dialog" style="padding-top: 15%;"><div class="WCD_Loading" style="color:white;text-align: center;"><i class="fas fa-spinner fa-spin" style="font-size: 30px;"><\/i><\/div><\/div>');$(t).data("wwpUC",this);delete this.confirmPanel_wcRenderHandler;t.modal("show").on("hide.bs.modal",function(){n.confirmPanel_wcRenderHandler!=null&&(gx.fx.obs.deleteObserver("webcom.render",window,n.confirmPanel_wcRenderHandler),delete n.confirmPanel_wcRenderHandler,clearTimeout(e))}).on("hidden.bs.modal",function(){t.remove();t=null})}var s=$("#"+this.containerName+"Body")[0],h=WWP_getWCId("DIV_WWPAUXWC",this.control),o=WWP_moveWCToDiv(h,this.control,!1,s);if(e=window.setTimeout(function(){n.confirmPanel_wcRenderHandler!=null&&n.confirmPanel_wcRendered(r,null)},5e3),o.html(""),this.confirmPanel_wcRenderHandler=function(t){t.containerControl==o[0]&&n.confirmPanel_wcRenderHandler!=null&&n.confirmPanel_wcRendered(r,e)},gx.fx.obs.addObserver("webcom.render",window,this.confirmPanel_wcRenderHandler),this.control.OnLoadComponent!=null){if(r){for(u=i;u.length>0;)u=u.parent().closest(".gx_usercontrol.modal").css("display","none");$(".modal.modal-loading .WCD_Loading").css("display","")}n._origTitle=$(document).find("head>title").text();this.control.OnLoadComponent()}i.on("show.bs.modal",function(i){var f,r,u;for($(t).find(".WCD_Loading").css("display","none"),f=$(this).find(">.modal-dialog-wc"),$(this).css("display","block"),r=$(this);r.length>0;)r=r.parent().closest(".gx_usercontrol.modal").css("display","block");for(n.screenResize(),$(this).css("display","none"),r=$(this);r.length>0;)r=r.parent().closest(".gx_usercontrol.modal").css("display","none");for(u=$(this);u.length>0;)u=u.parent().closest(".gx_usercontrol.drop-down-options,.NeedFixConfirmInsideFixedDropDown").addClass("FixConfirmInsideFixedDropDown");i.stopPropagation()}).on("hide.bs.modal",function(n){var r,i;for(t!=null&&(r=!1,$(this).find(".gx_usercontrol.modal").each(function(){if($(this).css("display")!="none")return r=!0,!1}),r||t.modal("hide")),i=$(this);i.length>0;)i=i.parent().closest(".FixConfirmInsideFixedDropDown").removeClass("FixConfirmInsideFixedDropDown");n.stopPropagation()}).on("hidden.bs.modal",function(i){n.control.Close&&n.control.Close();$(this).css("display")=="none"&&(o.html(""),$(document).find(">html>body").addClass("modal-open"),WWPActions_Properties.CurrentModal=$(this).closest(".modal-dialog-wc").parent().attr("id"),WWPActions_Properties.CurrentModal==null&&$(document).find(">html>body").removeClass("modal-open").css("padding-right",""),t!=null&&t.modal("hide"),n._origTitle!=null&&$(document).find("head>title").text(n._origTitle));$("html>body.FormKanban").length==1&&$(".FSKanbanCell").each(function(){$(this).css("width","");$(this).css("height","");$(this).find(">*").css("display","")});i.stopPropagation()}).on("shown.bs.modal",function(t){var u,i,f;if(document.activeElement!=null&&$(document.activeElement).attr(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR)==null&&(u=$("#"+n.containerName).find("["+gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR+"]:eq(0)"),u.length>0?$(document.activeElement).attr(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,u.attr(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR)):window.setTimeout(function(){if(document.activeElement!=null&&$(document.activeElement).attr(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR)==null){var t=$("#"+n.containerName).find("["+gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR+"]:eq(0)");t.length>0&&$(document.activeElement).attr(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,t.attr(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR))}},1e3)),$(document).find(">html>body").addClass("modal-open"),r)for(i=$(this);i.length>0;)i=i.parent().closest(".gx_usercontrol.modal").css("display","block");$("html>body.FormKanban").length==1&&(f=$(document.activeElement).find(".modal-content"),f.length==1&&$(".FSKanbanCell").each(function(){$(this).find(".row").length>0&&WWP_isOverlap(this,f[0])&&($(this).css("width",$(this).outerWidth()),$(this).css("height",$(this).outerHeight()),$(this).find(">*").css("display","none"))}));t.stopPropagation()})}else{n.closeHandled=!0;i.on("shown.bs.modal",function(t){var u,f;if(n.closeHandled=!1,n.control.Comment!="No"){if(r)for(u=$(this);u.length>0;)u=u.parent().closest(".gx_usercontrol.modal").css("display","block");f=$(this).find(".ConfirmComment");WWP_IsTrnMode("DLT")&&(f.attr("disabled",null),f.removeClass("gx-disabled gx-invisible"));f.focus();n.control.Comment=="Required"&&i.find(".ConfirmComment").trigger("keyup")}else n.control.FocusedButton!=null&&n.control.FocusedButton!=""&&n.control.FocusedButton!="None"&&i.find(".modal-footer button.btn-"+n.control.FocusedButton.toLowerCase()+"-DVelop").focus();t.stopPropagation()}).on("show.bs.modal",function(n){n.stopPropagation()}).on("hide.bs.modal",function(n){n.stopPropagation()}).on("hidden.bs.modal",function(t){if(n.BodyContentParent!=null){var i=document.getElementById(n.control.BodyContentInternalName);i!=null&&n.BodyContentParent.appendChild(i)}t.stopPropagation()});i.modal("show");this.control.Comment=="Required"&&i.find(".ConfirmComment").off("keyup").keyup(function(){i.find(".modal-footer button:not(.btn-cancel-DVelop)").prop("disabled",$(this).val()=="")});i.find(".modal-footer button").off("keydown").keydown(function(t){t.which!=13||n.closeHandled||(t.stopPropagation(),t.preventDefault(),$(this).click())})}};this.confirmPanel_wcRendered=function(n,t){var r,u,i;WWPActions_Properties.CurrentModal=this.containerName;n?$("#"+this.containerName).modal({backdrop:!1}):$("#"+this.containerName).modal("show");r=this.confirmPanel_wcRenderHandler;delete this.confirmPanel_wcRenderHandler;clearTimeout(t);u=this;window.setTimeout(function(){gx.fx.obs.deleteObserver("webcom.render",window,r)},1);i=$("#"+u.containerName).find(".FocusOnShown");i.length>0&&window.setTimeout(function(){i.first().focus()},500)};this.closeModal=function(){$("#"+this.containerName+".fade").modal("hide")};this.destroy=function(){this.closeModal()};this.screenResize=function(){var n=$("#"+this.containerName).find(">.modal-dialog-wc"),t=n.find(">div").height(),i=this.control.Height.replace("px",""),e;i==""+parseInt(i)&&(t=Math.max(t,parseInt(i)));var r=$(window).height(),u=Math.min(Math.max(10,(r-t)/2),r/5),f=10;n.css({"padding-top":u,"padding-bottom":f,"margin-top":0,"margin-bottom":0});e=n.find(">div>.modal-header").outerHeight()+u+f;n.find(">div>.modal-body-wc").css("max-height","calc(100vh - "+e+"px)")}}function DVelopBootstrapDropDownOptions(n){this.control=n;this.containerName=n.ContainerName;this.containerToDrawName=this.containerName;this.myT=null;this.calendarOpened=!1;this.dateFilterVarName="";this.m_UlDropDown;this.m_triggerButton;this.SelectedValue_getAUX="";this.SelectedText_getAUX="";this.ColumnsSelectorData_Aux;this.IsDate=function(){return this.control.FilterType=="Date"};this.getGridItemSelectedValue=function(){var t="",n;return this.IsTrnInDisplayMode?(n=$("[data-gx-enabled-id="+this.realId+"]"),n.length==1&&(t=n[0].innerText)):(n=$("#"+this.realId),t=n.val()),t=="0"&&(n.attr("type")=="number"||n.attr("inputmode")=="numeric")?t="":t=="00000000-0000-0000-0000-000000000000"&&(this.IsTrnInDisplayMode||n.attr("type")=="text"&&n.attr("size")=="36")&&(t=""),t};this.render=function(){var n,ii,wt,ai,pt,vi,yi,cr,pi,wi,bt,bi,ki,c,di,r,rt,k,d,st,u,gi,nr,a,ht,v,tr,at,ri,ir,ui,rr,fi,g,kt,dt,gt,ei,oi,ni,ut,ti,ft,si,et,ct,vt,h,ot,i,ur,lt,w,yt,o,l,b,nt,hi,ci,y,or,e,tt,t,li,sr,it,hr;if(this.control.IsGridItem?(this.control.Enabled=this.isEnabled(),this.containerName="DVC_"+this.realId,this.control.SelectedValue=this.getGridItemSelectedValue(),this.control.SelectedText=this.realSelectedText!=null?this.realSelectedText:"",this.control.VisibleVal=!0):(this.control.Enabled=WWP_FixBooleanProperty(this.control.Enabled),this.control.VisibleVal=WWP_FixBooleanProperty(this.control.Visible)),this.control.IncludeAddNewOption=WWP_FixBooleanProperty(this.control.IncludeAddNewOption),this.control.IncludeOnlySelectedOption=WWP_FixBooleanProperty(this.control.IncludeOnlySelectedOption),this.control.IncludeSelectAllOption=WWP_FixBooleanProperty(this.control.IncludeSelectAllOption),this.control.EmptyItem=WWP_FixBooleanProperty(this.control.EmptyItem),this.control.DropDownOptionsType=="ExtendedSuggest"&&(this.control.HasIM=this.control.HasIM||this.control.EmptyItem,this.control.EmptyItem=!1),this.control.IncludeFilter=WWP_FixBooleanProperty(this.control.IncludeFilter),this.control.FilterIsRange=WWP_FixBooleanProperty(this.control.FilterIsRange),this.control.FilterIsRangePicker=WWP_FixBooleanProperty(this.control.FilterIsRangePicker),this.control.IncludeDataList=WWP_FixBooleanProperty(this.control.IncludeDataList),this.control.IncludeSortASC=WWP_FixBooleanProperty(this.control.IncludeSortASC),this.control.IncludeSortDSC=WWP_FixBooleanProperty(this.control.IncludeSortDSC),this.control.AllowGroup=WWP_FixBooleanProperty(this.control.AllowGroup),this.control.AllowMultipleSelection=WWP_FixBooleanProperty(this.control.AllowMultipleSelection)&&(this.control.IncludeDataList||this.control.DropDownOptionsType=="ExtendedComboBox"),this.control.IncludeDataList&&this.control.DataListType.indexOf("Dynamic")==0&&this.control.DataListProc.trim()==""&&(this.control.IncludeDataList=!1),this.control.IncludeOnlySelectedOption=this.control.IncludeOnlySelectedOption&&this.control.AllowMultipleSelection,this.control.IncludeSelectAllOption=this.control.IncludeSelectAllOption&&this.control.AllowMultipleSelection,this.control.AllowMultipleSelection&&(this.control.MultipleValuesSeparator=this.control.MultipleValuesSeparator==""?wwp.labels.MultipleValuesSeparator:this.control.MultipleValuesSeparator,this.control.SelectedValue_get==""&&(this.control.SelectedValue_get="[]",this.control.SelectedText_get="[]")),this.control.FilterIsRange&&this.control.DataListType=="Dynamic (with fixedValues)"&&(this.control.FilterIsRange=!1),this.control.DropDownOptionsTitleSettingsIcons_IsFI=this.control.DropDownOptionsTitleSettingsIcons!=null&&this.control.DropDownOptionsTitleSettingsIcons.def!=null&&this.control.DropDownOptionsTitleSettingsIcons.def.length>0,this.control.TitleControlIdToReplace!=""?(this.containerToDrawName=this.control.IsGridItem?this.containerName:this.control.TitleControlIdToReplace,n=$("#"+this.containerToDrawName),this.control.VisibleVal=this.control.Visible&&(this.control.DropDownOptionsType=="GridTitleSettings"?n.closest("th"):n).css("display")!="none",ii=!1,n.length==0?(wt=document.getElementsByName(this.containerToDrawName),wt.length==1?wt[0].nodeName=="INPUT"?(ii=!0,pt=wt[0]):wt[0].setAttribute("id",this.containerToDrawName):this.control.DropDownOptionsType=="GridTitleSettings"&&WWP_startsWith(this.containerToDrawName.toLowerCase(),this.GetWebComponentPrefix().toLowerCase()+"grid_")&&(ai=$("#"+this.GetWebComponentPrefix()+"GridContainerDiv").find("thead").find("#"+this.containerToDrawName.substring(this.GetWebComponentPrefix().length+4)),ai.length==1&&ai[0].setAttribute("id",this.containerToDrawName))):n[0].nodeName=="INPUT"&&(ii=!0,pt=n[0]),ii&&(vi=pt.parentElement,yi=document.createElement("div"),yi.setAttribute("id",this.containerToDrawName),vi.insertBefore(yi,pt),vi.removeChild(pt),n=$("#"+this.containerToDrawName))):n=$("#"+this.containerToDrawName),this.control.DropDownOptionsType=="Component"&&n.children().length>0&&this.control.Visible){this.control.Icon.length>0&&(cr=$(this.m_triggerButton).find(">"+(this.control.IconType=="Image"?"img":"i")),cr.attr(this.control.IconType=="Image"?"src":"class",this.control.Icon));$(this.m_triggerButton).find(">span:not(.caret)").first().text(this.control.Caption);pi=n[0].className;wi=pi.indexOf(" drop-down-options");wi>0&&(n[0].className="gx_usercontrol "+this.control.Cls+pi.substring(wi));return}if(bt=[],(this.control.DropDownOptionsType=="ExtendedComboBox"||this.control.DropDownOptionsType=="ExtendedSuggest")&&n.find(">.ErrorAttribute").length==1&&n.find(".ErrorMessages").each(function(){bt.push($(this).text())}),bi=n.find(document.activeElement).length==1,(bi||n.data("updatingDateValue")!=null)&&n.hasClass("open")){n.data("updatingDateValue",null);(this.control.DropDownOptionsType=="ExtendedComboBox"||this.control.DropDownOptionsType=="ExtendedSuggest")&&this.control.DataListProc!=null&&this.control.DataListProc!=""&&this.lastAjaxPrefix!=this.getDataListProcParametersPrefix()&&n.find(">button").click().click();return}if((this.control.AllowMultipleSelection||this.control.isWPMultiplesView||WWP_endsWith(this.containerName,"Container_0001"))&&n.data("wwpUC",this),n.html(""),n.attr("class","gx_usercontrol"),n.off(),this.ShowHideControl(),!this.control.Visible){if(this.control.Cls.indexOf("open")==-1&&(n.removeClass("open"),this.IsActionGroupInFS())){ki=document.createElement("div");$(ki).on("click",function(){});n.append(ki)}return}if(t=this,this.control.DropDownOptionsType=="ExtendedComboBox"||this.control.DropDownOptionsType=="ExtendedSuggest"){this.control.SelectedText!=""||this.control.AllowMultipleSelection&&this.control.SelectedValue==""||(this.control.SelectedValue==""&&this.control.EmptyItem?this.control.SelectedText=gx.getMessage(this.control.EmptyItemText):this.loadExtendedComboSelectedText(this.control.DropDownOptionsData,null,!0),this.control.IsGridItem&&(this.realSelectedText=this.control.SelectedText));n.on("hide.bs.dropdown",function(n){return function(){if(n.control.DropDownOptionsType=="ExtendedSuggest"&&!n.valueSet&&$(n.m_triggerButton.parentElement).hasClass("open")&&$(n.m_inputSuggest).val()!=""){var t=$(n.m_triggerButton.parentElement).find(".FilterOptions>ul>li.current");t.length==1?(n.doNotFocus=!0,t.find(">a").click()):($(n.m_inputSuggest).val(""),n.Suggest_SetEmptyValue())}return n.OnDDOClosingRemoveError()}}(this));n.keydown(function(i){if(i.which==40)n.hasClass("open")?document.activeElement!=null&&(document.activeElement==t.m_filterInput?(n.find(".FilterOptions >ul>li:visible").first().find(">a").focus(),i.stopPropagation(),i.preventDefault()):$(document.activeElement).parent().parent().parent().hasClass("FilterOptions")&&($(document.activeElement).parent().nextAll("*:visible").first().find(">a").focus(),i.stopPropagation(),i.preventDefault())):(n.find(">button").click(),i.stopPropagation(),i.preventDefault());else if(i.which==38){if(document.activeElement!=null)if(document.activeElement==t.m_filterInput)n.removeClass("open"),n.trigger("hide.bs.dropdown"),n.find(">button").focus();else if($(document.activeElement).parent().parent().parent().hasClass("FilterOptions")){var r=$(document.activeElement).parent().prevAll("*:visible").first();r.length==0?$(t.m_filterInput).focus():r.find(">a").focus();i.stopPropagation();i.preventDefault()}}else i.which==27&&n.hasClass("open")&&(document.activeElement==null||n.find(document.activeElement).length==1)&&(n.removeClass("open"),t.control.AllowMultipleSelection&&t.control.OnOptionClicked&&t.control.OnOptionClicked(),n.trigger("hide.bs.dropdown"),n.find(">button").focus())})}if(this.control.DropDownOptionsType=="ExtendedSuggest"&&n.addClass("ExtendedSuggest"),this.control.AllowMultipleSelection&&(this.control.DropDownOptionsType=="ExtendedComboBox"||this.control.DropDownOptionsType=="ExtendedSuggest")&&n.addClass("ExtendedComboMultiple"),this.control.Enabled||this.control.DropDownOptionsType!="ExtendedComboBox"&&this.control.DropDownOptionsType!="ExtendedSuggest"){for(n.removeClass("ReadonlyExtendedCombo"),n.addClass(this.control.Cls),(n.parent().parent().parent().css("text-align")=="right"||n.parent().parent().parent().css("text-align")=="end")&&n.parent().addClass(this.control.Cls+"AlignTitleRight"),n.addClass("drop-down-options btn-group"),r=document.createElement("button"),rt=this.containerName+"_btnGroupDrop",r.id=rt,r.className="btn btn-default dropdown-toggle",r.setAttribute("type","button"),r.setAttribute("data-toggle","dropdown"),k=null,d=null,this.control.UseAsGridTitleSetting&&(this.control.DropDownOptionsTitleSettingsIcons==null&&(this.control.DropDownOptionsTitleSettingsIcons={}),st=!1,this.control.AllowMultipleSelection&&this.control.TitleControlIdToReplace==""||(st=this.control.IncludeDataList&&!this.IsValueEmpty(this.control.SelectedValue)||this.control.IncludeFilter&&(!this.IsValueEmpty(this.control.FilteredText)||this.control.FilterIsRange&&!this.IsValueEmpty(this.control.FilteredTextTo))||this.control.SelectedFixedFilter!=""),k=gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons.Default),d=this.control.DropDownOptionsTitleSettingsIcons.def,this.control.IncludeSortASC&&(this.control.SortedStatus=="ASC"||this.control.SortedStatus=="ASC GRP")?st?(k=gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons.FilteredSortedASC),d=this.control.DropDownOptionsTitleSettingsIcons.fasc,$(r).addClass("FilteredSortedASC")):(k=gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons.SortedASC),d=this.control.DropDownOptionsTitleSettingsIcons.asc,$(r).addClass("SortedASC")):this.control.IncludeSortDSC&&(this.control.SortedStatus=="DSC"||this.control.SortedStatus=="DSC GRP")?st?(k=gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons.FilteredSortedDSC),d=this.control.DropDownOptionsTitleSettingsIcons.fdsc,$(r).addClass("FilteredSortedDSC")):(k=gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons.SortedDSC),d=this.control.DropDownOptionsTitleSettingsIcons.dsc,$(r).addClass("SortedDSC")):st&&(k=gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons.Filtered),d=this.control.DropDownOptionsTitleSettingsIcons.fil,$(r).addClass("Filtered"))),this.control.Tooltip.length>0&&(r.setAttribute("title",gx.getMessage(this.control.Tooltip)),(this.control.DropDownOptionsType=="ExtendedComboBox"||this.control.DropDownOptionsType=="ExtendedSuggest")&&($(r).toggleClass("BootstrapTooltipLeft",n.hasClass("BootstrapTooltipLeft")),$(r).toggleClass("BootstrapTooltipTop",n.hasClass("BootstrapTooltipTop")),$(r).toggleClass("BootstrapTooltipRight",n.hasClass("BootstrapTooltipRight")),$(r).toggleClass("BootstrapTooltipBottom",n.hasClass("BootstrapTooltipBottom")))),u=document.createElement("ul"),u.className="dropdown-menu",u.setAttribute("role","menu"),u.setAttribute("aria-labelledby",this.containerName+"_btnGroupDrop"),gi=!1,a=0;this.control.DropDownOptionsData!=null&&a<this.control.DropDownOptionsData.length;a+=1)if(this.control.DropDownOptionsData[a].Icon!=null&&this.control.DropDownOptionsData[a].Icon.length>0||this.control.DropDownOptionsData[a].FontIcon!=null&&this.control.DropDownOptionsData[a].FontIcon.length>0){gi=!0;break}if(this.m_UlDropDown=u,this.m_triggerButton=r,this.control.TitleControlAlign!="Right")n.on("shown.bs.dropdown",function(n){return function(){n.control.TitleControlAlign=="Automatic"?(WWP_dropdownAutoPosition("#"+n.containerToDrawName,u,r),$("#"+n.containerToDrawName).closest(".gx-content-placeholder.transitioning").length==1&&window.setTimeout(function(){WWP_dropdownAutoPosition("#"+n.containerToDrawName,u,r)},50)):WWP_ddo_invertPosition(u,r)}}(this));n.on("hidden.bs.dropdown",function(n){return function(){n.setSectionGridMinHeight(!1);n.shiftPageFooter(!1);n.lastAjaxPrefix!=null&&delete n.lastAjaxPrefix}}(this));this.control.DropDownOptionsType=="Component"&&this.DDComponentHide(n);n.on("shown.bs.dropdown",function(t){return function(i){var e,f;$("#"+t.containerToDrawName).attr("class").indexOf(" open")!=-1&&(t.control.DropDownOptionsType=="Component"&&(i==null||i.target==n[0])&&(t.DDComponentShown(n),t.control.TitleControlAlign=="Automatic"&&WWP_dropdownAutoPosition("#"+t.containerToDrawName,u,r)),t.setSectionGridMinHeight(!0),t.shiftPageFooter(!0),t.applyDateFocusHack&&(e=$("#"+t.GetDateFilterVariable()).get(0),$(e).focus(),t.HasWWPDatePicker&&$(e).data("daterangepicker").hide(),$(t.m_triggerButton).focus()),t.m_filterInput!=null&&(f=$(t.m_filterInput).data("daterangepicker"),f!=null?(f.isShowing=!0,gx.fn.setFocus(t.m_filterInput,function(){f.isShowing=!1})):$(t.m_filterInput).focus()),t.control.IsGridItem&&t.control.AllowMultipleSelection&&(t.control.openedControl=t.containerName))}}(this));if(this.control.DropDownOptionsType=="ExtendedComboBox"||this.control.DropDownOptionsType=="ExtendedSuggest"){this.extendedComboBoxLoaded=!1;$(r).on("click",function(n,t){return function(){$("#"+n.containerToDrawName).attr("class").indexOf(" open")==-1&&(n.control.IsGridItem&&(n.control.SelectedValue=n.getGridItemSelectedValue(),n.control.SelectedText=n.realSelectedText!=null?n.realSelectedText:""),n.loadExtendedComboBox(t),n.updateExtendedComboList(n.extendedComboBox_UL,n.control.DropDownOptionsType=="ExtendedSuggest"?$(n.m_inputSuggest).val():""),n.m_filterInput!=null&&$(n.m_filterInput).val(""))}}(this,u)).on("focus",function(){var i=t.control.extendedCombo_getAttributeInfo(t.control.IsGridItem?t.containerName:null);if(i!=null&&t.validating==null){var r=gx.O,u=i.wcName+i.attName,n=r.getValidStructFld(u);n!=null&&(r.focusControl!=n.id||t.control.IsGridItem&&t.control.ValidatedRowId!=gx.currentRows[n.grid])&&(t.validating="",t.control.ValidatedRowId=gx.currentRows[n.grid],$("#"+u).focus(),window.setTimeout(function(){t.validating!=null&&delete t.validating},500))}});if(this.control.AllowMultipleSelection&&this.control.OnOptionClicked){if(nr=this.control.extendedCombo_getAttributeInfo(),nr!=null)n.on("hide.bs.dropdown",function(n){return function(){n.extendedCombo_UpdateRealAttVal(nr)}}(t));n.on("hide.bs.dropdown",this.control.OnOptionClicked)}this.control.IsGridItem}else for(a=0;this.control.DropDownOptionsData!=null&&a<this.control.DropDownOptionsData.length;a+=1){var f=this.control.DropDownOptionsData[a],o=document.createElement("li"),s=null,p=null;if(f.IsDivider)if(a<this.control.DropDownOptionsData.length-1){o.className="divider";$(o).on("click",function(n){n.preventDefault();n.stopPropagation()})}else o=null;else if(f.EventKey=="<#RawHTML#>")$(o).html(f.Title);else if(f.EventKey=="<#FilterOptions#>"){ht=document.createElement("li");st||$(ht).css("display","none");v=document.createElement("a");tr=document.createElement("span");tr.innerHTML=gx.getMessage(this.control.CleanFilter);$(v).on("click",function(n){return function(){n.IsDate()&&(n.control.FilterIsRange&&n.control.FilterIsRangePicker?n.DetachAuxDateVariable(n.GetRangePickerFilterVariable()):(n.DetachAuxDateVariable(n.GetDateFilterVariable()+"_dp_container"),n.control.FilterIsRange&&n.DetachAuxDateVariable(n.GetDateFilterVariableTo()+"_dp_container")));n.SetActiveEventKey("<#Filter#>");n.SetFilteredText("");n.control.FilterIsRange&&n.SetFilteredTextTo("");var t="";n.control.AllowMultipleSelection&&(t="[]");n.SetSelectedValue(t);n.SetSelectedText(t)}}(this));if(this.control.OnOptionClicked){if(this.IsDate())$(v).on("click",function(n){return function(){n.calendarOpened=!1}}(this));$(v).on("click",this.control.OnOptionClicked)}if(v.setAttribute("href",DDO_GetLocalURL()),navigator.appVersion.toLowerCase().match("msie 8")||navigator.appVersion.toLowerCase().match("msie 7")||navigator.appVersion.toLowerCase().match("msie 9")||v.setAttribute("data-toggle","dropdown"),v.className="image",v.setAttribute("style","margin-bottom:10px"),this.control.DropDownOptionsTitleSettingsIcons_IsFI?(at=document.createElement("i"),at.setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons.cle),v.appendChild(at)):(at=document.createElement("img"),at.setAttribute("src",gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons.OptionCleanFilters)),v.appendChild(at)),v.appendChild(tr),ht.appendChild(v),u.appendChild(ht),st){ri=document.createElement("li");ri.className="divider";$(ri).on("click",function(n){n.preventDefault();n.stopPropagation()});u.appendChild(ri)}if(this.control.FixedFilters.trim()!=""){ir=document.createElement("li");u.appendChild(ir);this.LoadFixedFilters(ir);ui=document.createElement("li");ui.className="divider";$(ui).on("click",function(n){n.preventDefault();n.stopPropagation()});u.appendChild(ui)}if(this.control.AllowMultipleSelection&&(this.SelectedValue_getAUX=this.control.SelectedValue_get!=null&&this.control.SelectedValue_get!=""?JSON.parse(this.control.SelectedValue_get):[],this.SelectedText_getAUX=this.control.SelectedText_get!=null&&this.control.SelectedText_get!=""?JSON.parse(this.control.SelectedText_get):[]),this.control.IncludeFilter){if(rr=document.createElement("li"),l=document.createElement("div"),l.setAttribute("style","display: block; margin-right:10px;margin-left:10px;padding-bottom:10px"),fi=!0,g="search_"+this.containerName,this.IsDate()?(kt=document.createElement("div"),kt.setAttribute("id",this.containerName+"DateDiv"),kt.setAttribute("class",this.control.FilterIsRange&&this.control.FilterIsRangePicker?"ColumnSettingsRangePickerContainerDiv":"ColumnSettingsRangeContainerDiv"),this.control.FilterIsRange&&!this.control.FilterIsRangePicker?(dt=document.createElement("div"),dt.setAttribute("class","ColumnSettingsRangeContainer"),ut=document.createElement("span"),ut.setAttribute("class","ColumnSettingsRangeContainerSpan"),ut.innerHTML=gx.getMessage(this.control.RangeFilterFrom),l.appendChild(dt),dt.appendChild(ut),dt.appendChild(kt),$(u).css("min-width","195px")):l.appendChild(kt),this.control.FilterIsRange&&!this.control.FilterIsRangePicker&&(gt=document.createElement("div"),gt.setAttribute("class","ColumnSettingsRangeContainer"),ft=document.createElement("span"),ft.setAttribute("class","ColumnSettingsRangeContainerSpan"),ft.innerHTML=gx.getMessage(this.control.RangeFilterTo),l.appendChild(gt),gt.appendChild(ft),ei=document.createElement("div"),ei.setAttribute("id",this.containerName+"DateDivTo"),ei.setAttribute("class","ColumnSettingsRangeContainerDiv"),gt.appendChild(ei))):(oi=!1,this.control.FilterIsRange?(ni=document.createElement("div"),ni.setAttribute("class","ColumnSettingsRangeContainer"),ut=document.createElement("span"),ut.setAttribute("class","ColumnSettingsRangeContainerSpan"),ut.innerHTML=gx.getMessage(this.control.RangeFilterFrom),ni.appendChild(ut),l.appendChild(ni),s=document.createElement("input"),ni.appendChild(s),$(u).css("min-width","197px")):(b=document.createElement("div"),b.setAttribute("class","gx-attribute"),b.setAttribute("style","margin-right:10px"),nt=document.createElement("div"),nt.setAttribute("class","input-group"),b.appendChild(nt),l.appendChild(b),fi=!1,s=document.createElement("input"),nt.appendChild(s)),this.control.FilterIsRange&&(ti=document.createElement("div"),ti.setAttribute("class","ColumnSettingsRangeContainer"),ft=document.createElement("span"),ft.setAttribute("class","ColumnSettingsRangeContainerSpan"),ft.innerHTML=gx.getMessage(this.control.RangeFilterTo),ti.appendChild(ft),l.appendChild(ti),p=document.createElement("input"),ti.appendChild(p),this.CreateFilterInput(this.control.FilteredTextTo,o,p,s,p,!0,g,rt),oi=!0),this.CreateFilterInput(this.control.FilteredText,o,s,s,p,oi,g,rt)),!this.control.IncludeDataList||this.control.DataListType=="Dynamic"&&this.control.TitleControlIdToReplace!="")if(e=document.createElement("input"),fi){e.setAttribute("id",g);e.setAttribute("type","button");e.setAttribute("value",gx.getMessage(this.control.SearchButtonText));e.setAttribute("class","btn btn-default Button");$(e).on("click",function(n){return function(){var r,i,t;n.SetActiveEventKey("<#Filter#>");n.IsDate()?(n.SetSelectedValue(""),n.SetSelectedText(""),n.control.FilterIsRange&&n.control.FilterIsRangePicker?(n.DetachAuxDateVariable(n.GetRangePickerFilterVariable()),r=$("#"+n.GetRangePickerFilterVariable()),r.val()==""?(n.SetFilteredText(""),n.SetFilteredTextTo("")):(i=r.data("daterangepicker"),n.SetFilteredText(i.startDate.format(i.locale.format)),n.SetFilteredTextTo(i.endDate.format(i.locale.format)))):(n.DetachAuxDateVariable(n.GetDateFilterVariable()+"_dp_container"),n.SetFilteredText($("#"+n.GetDateFilterVariable()).val()),n.control.FilterIsRange&&(n.DetachAuxDateVariable(n.GetDateFilterVariableTo()+"_dp_container"),n.SetFilteredTextTo($("#"+n.GetDateFilterVariableTo()).val())))):(n.control.AllowMultipleSelection?(n.SetSelectedValue("[]"),n.SetSelectedText("[]"),n.SelectedValue_getAUX=[],n.SelectedText_getAUX=[]):(n.SetSelectedValue(""),n.SetSelectedText("")),t=$(s).val(),n.SetFilteredText(n.TF_IsNumericFilter()?WWP_replaceAll(t,gx.decimalPoint,"."):t),n.control.FilterIsRange&&(n.DetachAuxDateVariable(n.GetDateFilterVariableTo()+"_dp_container"),t=$(p).val(),n.SetFilteredTextTo(n.TF_IsNumericFilter()?WWP_replaceAll(t,gx.decimalPoint,"."):t)))}}(this));if(this.control.OnOptionClicked)$(e).on("click",this.control.OnOptionClicked);navigator.appVersion.toLowerCase().match("msie 8")||navigator.appVersion.toLowerCase().match("msie 7")||navigator.appVersion.toLowerCase().match("msie 9")||e.setAttribute("data-toggle","dropdown");l.appendChild(e)}else{si=document.createElement("span");si.setAttribute("class","input-group-btn");nt.appendChild(si);et=document.createElement("a");et.setAttribute("id",g);et.setAttribute("class","btn btn-default");si.appendChild(et);this.control.DropDownOptionsTitleSettingsIcons_IsFI?(ct=document.createElement("i"),ct.setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons.app),et.appendChild(ct)):(ct=document.createElement("img"),ct.setAttribute("src",gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons.OptionApplyFilter)),ct.setAttribute("class","Image"),et.appendChild(ct));$(et).on("click",function(n){return function(){n.SetActiveEventKey("<#Filter#>");var t="";n.control.AllowMultipleSelection&&(t="[]");n.SetSelectedValue(t);n.SetSelectedText(t);n.SetFilteredText($(s).val());n.control.FilterIsRange&&(n.DetachAuxDateVariable(n.GetDateFilterVariableTo()+"_dp_container"),n.SetFilteredTextTo($(p).val()))}}(this));if(this.control.OnOptionClicked)$(et).on("click",this.control.OnOptionClicked)}rr.appendChild(l);u.appendChild(rr)}if(this.control.IncludeDataList&&this.control.DataListType=="FixedValues"&&this.LoadListFixedValues(o,!1),vt=o,this.control.AllowMultipleSelection){e=document.createElement("input");e.setAttribute("type","button");e.setAttribute("value",gx.getMessage(this.control.SearchButtonText));e.setAttribute("class","btn btn-default Button");e.setAttribute("data-toggle","dropdown");$(e).on("click",function(n){return function(){n.SetActiveEventKey("<#Filter#>");n.SetSelectedValue(JSON.stringify(n.SelectedValue_getAUX,null,2));n.SetSelectedText(JSON.stringify(n.SelectedText_getAUX,null,2));n.SetFilteredText("");n.control.IncludeFilter&&n.control.FilterIsRange&&n.SetFilteredTextTo("")}}(this));if(this.control.OnOptionClicked)$(e).on("click",this.control.OnOptionClicked);y=document.createElement("li");y.setAttribute("class","LiFilterSelected");y.appendChild(e);u.appendChild(o);o=null;u.appendChild(y)}u.children.length>0&&u.children[u.children.length-1].className=="divider"&&u.removeChild(u.children[u.children.length-1]);$(r).on("click",function(n){return function(){var i,r,u,f,t,e;if($("#"+n.containerToDrawName).attr("class").indexOf(" open")==-1){if(n.control.AllowMultipleSelection){n.SelectedValue_getAUX=n.control.SelectedValue_get!=null&&n.control.SelectedValue_get!=""?JSON.parse(n.control.SelectedValue_get):[];n.SelectedText_getAUX=n.control.SelectedText_get!=null&&n.control.SelectedText_get!=""?JSON.parse(n.control.SelectedText_get):[];try{if($("#"+n.containerToDrawName).parent().next().children()[0].childNodes[1].className=="bootstrap-tagsinput"&&(u=$("#"+n.containerToDrawName).parent().next().children()[0].childNodes[1],$(u).css("min-width")=="0px")){$(u).css("min-width","150px");$("#"+n.containerToDrawName).off("hide.bs.dropdown").on("hide.bs.dropdown",function(){return function(){return $(u).css("min-width","0px"),!0}}(n))}}catch(e){}}if(n.control.IncludeFilter)if(n.IsDate()){$("#"+n.containerToDrawName).off("hide.bs.dropdown").on("hide.bs.dropdown",function(n){return function(){return n.OnDDOClosing()}}(n));if(n.control.FilteredText==""&&!n.control.FilterIsRangePicker)for(f=$("#"+n.GetDateFilterVariable()).get(0),n.control.FilteredText=$(f).val(),t=0;t<10;t+=1)n.control.FilteredText=WWP_replaceAll(n.control.FilteredText,t.toString()," ");if(r=null,n.auxVarsAttachedFunct=function(){n.auxVarsAttachedFunct!=null&&n.OnDDOClosing();n.auxVarsAttachedFunct!=null&&n.OnDDOClosing();$("#"+n.containerToDrawName).removeClass("open")},gx.fx.obs.addObserver("gx.onbeforeevent",n,n.auxVarsAttachedFunct),n.control.FilterIsRangePicker)i=n.AttachAuxRangePickerVariable(ht,n.GetRangePickerFilterVariable(),n.containerName+"DateDiv",n.control.FilteredText,n.control.FilteredTextTo,g,rt);else if(i=n.AttachAuxDateVariable(ht,n.GetDateFilterVariable(),n.containerName+"DateDiv",n.control.FilteredText,g,rt),n.control.FilterIsRange){if(n.control.FilteredTextTo=="")for(f=$("#"+n.GetDateFilterVariable()).get(0),n.control.FilteredTextTo=$(f).val(),t=0;t<10;t+=1)n.control.FilteredTextTo=WWP_replaceAll(n.control.FilteredTextTo,t.toString()," ");r=n.AttachAuxDateVariable(ht,n.GetDateFilterVariableTo(),n.containerName+"DateDivTo",n.control.FilteredTextTo,g,rt)}n.m_filterInput=i}else n.m_filterInput=s,i=s,r=null,n.control.IncludeDataList&&n.control.DataListType=="FixedValues"?($(s).val(""),n.control.AllowMultipleSelection?n.LoadListFixedValues(vt,!0):n.updateFixedValuesList2(vt,"")):(e=n.control.FilteredText.trim(),n.control.DataListType=="Dynamic (with fixedValues)"?$(s).val(""):n.TF_IsNumericFilter()&&gx.decimalPoint==","?$(s).val(WWP_replaceAll(e,".",",")):$(s).val(e)),n.control.FilterIsRange&&(n.TF_IsNumericFilter()&&gx.decimalPoint==","?$(p).val(WWP_replaceAll(n.control.FilteredTextTo.trim(),".",",")):$(p).val(n.control.FilteredTextTo.trim()),r=p);else(n.reloadListFixedValuesOnDDOOpen||n.includeFirstSelectedItem)&&(n.control.AllowMultipleSelection?n.LoadListFixedValues(vt,!0):n.updateFixedValuesList2(vt,""));n.control.IncludeDataList&&n.control.DataListType.indexOf("Dynamic")==0&&n.updateFilterList(vt,i,r,!1)}}}(this))}else{if(h=document.createElement("a"),ot=document.createElement("span"),$(ot).text(f.Title),this.control.UseAsGridTitleSetting&&(this.control.IncludeSortASC&&f.EventKey=="<#OrderASC#>"&&(this.control.SortedStatus=="ASC"||this.control.SortedStatus=="ASC GRP")||this.control.IncludeSortASC&&f.EventKey=="<#Group#>"&&(this.control.SortedStatus=="ASC GRP"||this.control.SortedStatus=="DSC GRP")||this.control.IncludeSortDSC&&f.EventKey=="<#OrderDSC#>"&&(this.control.SortedStatus=="DSC"||this.control.SortedStatus=="DSC GRP")||f.EventKey=="<#FixLeft#>"&&n.closest("th").hasClass("FixedColumnL")||f.EventKey=="<#FixRight#>"&&n.closest("th").hasClass("FixedColumnR"))&&(ot.innerHTML="<strong>"+ot.innerHTML+"<\/strong>"),i=this,ur=f.JSonclickEvent,ur.length>0)$(h).on("click",function(n){return function(t){var r=eval(n);r||(t.stopImmediatePropagation(),$("#"+i.containerToDrawName).removeClass("open"))}}(ur));if(f.Link.length>0)h.setAttribute("href",f.Link);else if(h.setAttribute("href",DDO_GetLocalURL()),navigator.appVersion.toLowerCase().match("msie 8")||navigator.appVersion.toLowerCase().match("msie 7")||navigator.appVersion.toLowerCase().match("msie 9")||h.setAttribute("data-toggle","dropdown"),lt=f.EventKey,lt=="<#FixLeft#>"||lt=="<#FixRight#>"){if(i.control.IsM)$(h).on("click",function(n){return function(){var t=WWP_GetEmpowerer(i.control.MControl);t!=null&&t.FixColumn($(this).closest("th").data("colIndex"),n=="<#FixLeft#>")}}(lt))}else if(lt=="<#ADV#>"){var lr=WWP_getCurrentWCId(this.control),fr=window.location.pathname.substring(window.location.pathname.lastIndexOf("/")+1).replace(".aspx","")+"_ADVF"+lr,ar=readCookie(fr),er="#"+lr+"ADVANCEDFILTERSCONTAINER";ar!=null&&ar!=""&&$(er).parent().addClass("CellAdvancedFiltersVisible").css("display","block");w=f.Title;w.indexOf("|")>0&&$(ot).text($(er).parent().css("display")=="none"?w.substring(0,w.indexOf("|")):w.substring(w.indexOf("|")+1));$(h).on("click",function(n,t){return function(){var n=$(er).parent(),i=n.hasClass("CellAdvancedFiltersVisible");n.toggleClass("CellAdvancedFiltersVisible",!i);i?(createCookie(fr,""),n.slideUp(200)):(createCookie(fr,"V"),n.slideDown(200));w.indexOf("|")>0&&$(t).text(i?w.substring(0,w.indexOf("|")):w.substring(w.indexOf("|")+1))}}(lt,ot))}else{$(h).on("click",function(n){return function(){if(i.control.IncludeDataList&&i.ajaxCall!=null&&i.ajaxCall.abort(),i.control.IncludeDataList&&i.ajaxCall2!=null&&i.ajaxCall2.abort(),i.control.IsM&&(n=="<#OrderASC#>"||n=="<#OrderDSC#>"||n=="<#Group#>")&&(i.control.MControl.SelectedValue_get=i.control.MSortValue,n=="<#Group#>"&&(i.control.MControl.SelectedText_get=i.control.MName)),i.containerName.length>14&&i.containerName.substring(i.containerName.length-14,i.containerName.length-3)=="Container_0"){var t=$("#"+i.containerName.substring(0,i.containerName.length-3)+"001").data("wwpUC");t!=null&&t.SetActiveEventKey(n)}i.SetActiveEventKey(n);i.control.OnOptionClicked&&i.control.IncludeFilter&&i.IsDate()&&(i.control.FilterIsRange&&i.control.FilterIsRangePicker?i.DetachAuxDateVariable(i.GetRangePickerFilterVariable()):(i.DetachAuxDateVariable(i.GetDateFilterVariable()+"_dp_container"),i.control.FilterIsRange&&i.DetachAuxDateVariable(i.GetDateFilterVariableTo()+"_dp_container")))}}(lt));if(this.control.OnOptionClicked)$(h).on("click",this.control.OnOptionClicked)}f.Tooltip.length>0&&h.setAttribute("title",f.Tooltip);gi&&(h.className="image",f.Icon!=null&&f.Icon.length>0?(yt=document.createElement("img"),yt.setAttribute("src",f.Icon),h.appendChild(yt)):f.FontIcon!=null&&f.FontIcon.length>0?(yt=document.createElement("i"),yt.className=f.FontIcon,h.appendChild(yt)):ot.className="no-image");f.ThemeClass!=null&&f.ThemeClass.length>0&&(o.className=f.ThemeClass);h.appendChild(ot);o.appendChild(h)}o!=null&&u.appendChild(o)}if(this.control.DropDownOptionsType=="GridColumnsSelector"){if(o=document.createElement("li"),l=document.createElement("div"),l.setAttribute("style","display: block; margin-right:10px;margin-left:10px;padding-bottom:10px"),b=document.createElement("div"),b.setAttribute("class","gx-attribute"),b.setAttribute("style","margin-right:10px"),nt=document.createElement("div"),nt.setAttribute("class","input-group"),b.appendChild(nt),l.appendChild(b),fi=!1,s=document.createElement("input"),this.m_filterInput=s,nt.appendChild(s),o.appendChild(l),u.appendChild(o),o=document.createElement("li"),this.CreateFilterInput(this.control.FilteredText,o,s,s,p,oi,g,rt),hi=document.createElement("div"),hi.className="FilterOptions FilterOptionsMultiSelection",ci=document.createElement("ul"),this.loadColumnsSelectorValues(ci),hi.appendChild(ci),o.appendChild(hi),u.appendChild(o),y=document.createElement("li"),y.setAttribute("class","LiFilterSelected"),wwp.settings.columnsSelector.AllowColumnsRestore){$(y).addClass("UpdateColumnsAndRestore");$(y).html('<a href="#" data-toggle="dropdown" class="image" style="width: 20px;display: inline-block;"><i class="'+wwp.settings.columnsSelector.RestoreColumnsIconClass+'" title="'+WWP_replaceAll(gx.getMessage(wwp.labels.ColumnSelectorRestoreTooltip),'"',"")+'"><\/i><\/a>');or=$(y).find(">a");or.on("click",function(n){return function(){var t,i;WWP_HasGridEmpowerer(n.control)&&(t=WWP_GetGrid(n.control).find(">table"),t!=null&&(i=window.location.pathname.substring(window.location.pathname.lastIndexOf("/")+1).replace(".aspx","")+"_"+t.attr("id").replace("ContainerTbl",""),readCookie(i)!=null&&createCookie(i,"[]")));n.control.ColSelRestoring=!0;n.control.ColumnsSelectorValues=""}}(this));if(this.control.OnColumnsChanged)or.on("click",this.control.OnColumnsChanged)}e=document.createElement("input");e.setAttribute("type","button");e.setAttribute("value",gx.getMessage(this.control.UpdateButtonText==""?wwp.labels.UpdateButtonText:this.control.UpdateButtonText));e.setAttribute("class","btn btn-default Button");$(e).on("click",function(n){return function(){n.updateColumnSelectorDataBeforeGxEvent()}}(this));if(this.control.OnColumnsChanged)$(e).on("click",this.control.OnColumnsChanged);y.appendChild(e);u.appendChild(y);navigator.appVersion.toLowerCase().match("msie 8")||navigator.appVersion.toLowerCase().match("msie 7")||navigator.appVersion.toLowerCase().match("msie 9")||y.setAttribute("data-toggle","dropdown");$(r).on("click",function(n){return function(){n.m_filterInput.className="form-control Attribute";n.ColumnsSelectorData_Aux=JSON.parse(JSON.stringify(n.control.DropDownOptionsData,null,2));var t=WWP_HasGridEmpowerer(n.control)?WWP_GetEmpowerer(n.control):null;t!=null&&t.DropDownOptionsData_Columns!=null&&(n.control.DropDownOptionsData_Columns=JSON.parse(JSON.stringify(t.DropDownOptionsData_Columns,null,2)),n.ColumnsSelectorData_Aux.Columns=JSON.parse(JSON.stringify(t.DropDownOptionsData_Columns,null,2)));(n.ColumnsSelectorData_Aux.VisibleColumns!=undefined||n.ColumnsSelectorData_Aux.InvisibleColumns!=undefined)&&(n.ColumnsSelectorData_Aux.VisibleColumns==undefined&&(n.ColumnsSelectorData_Aux.VisibleColumns=[]),n.ColumnsSelectorData_Aux.InvisibleColumns==undefined&&(n.ColumnsSelectorData_Aux.InvisibleColumns=[]));$(s).val("");n.loadColumnsSelectorValues(ci)}}(this))}d!=null?(tt=document.createElement("i"),tt.setAttribute("class",d),r.appendChild(tt)):k!=null?(tt=document.createElement("img"),tt.setAttribute("src",k),r.appendChild(tt)):this.control.Icon.length>0&&(tt=document.createElement(this.control.IconType=="Image"?"img":"i"),tt.setAttribute(this.control.IconType=="Image"?"src":"class",this.control.Icon),r.appendChild(tt));this.control.DropDownOptionsType=="ExtendedSuggest"&&(this.m_inputSuggest=document.createElement("input"),this.m_inputSuggest.className="form-control Attribute",this.m_inputSuggest.setAttribute("type","text"),this.control.HasIM&&this.m_inputSuggest.setAttribute("placeholder",gx.getMessage(this.control.EmptyItemText)),this.m_inputSuggest.id=this.containerName+"_inputSuggest",$(this.m_inputSuggest).val(),t=this,$(this.m_inputSuggest).keyup(function(i){var f,r,h,u,s,e,o;if(t.lastWasKeyDown&&delete t.lastWasKeyDown,i.keyCode==38||i.keyCode==40){if(n.hasClass("open")&&document.activeElement!=null){if(f=n.find(".FilterOptions>ul>li.current"),f.length==1){for(r=i.keyCode==38?f.prev():f.next();r.length==1&&!r.is("li:visible");)r=i.keyCode==38?r.prev():r.next();r.length!=1||r.is("[loading-option]")||(f.removeClass("current"),r.addClass("current").find(">a").attr("add-new-option")==null?(u=r.find(">a").attr("dsc"),t.hasHTMLTemplate()&&(u=t.extendedComboCaption_GetHTMLUsingTemplate(u,!0))):u=r.text(),$(this).val(u))}else h=n.find(".FilterOptions>ul>li:visible:not([noData])"),r=i.keyCode==38?h.last():h.first(),r.length==1&&(r.addClass("current").find(">a").attr("add-new-option")==null?(u=r.find(">a").attr("dsc"),t.hasHTMLTemplate()&&(u=t.extendedComboCaption_GetHTMLUsingTemplate(u,!0))):u=r.text(),$(this).val(u));r.length==1&&t.Suggest_MakeLIVisible(r.parent().parent(),r)}}else s=i.keyCode>=48&&i.keyCode<=90||i.keyCode>=96&&i.keyCode<=105||i.keyCode==32||i.keyCode==229&&navigator.userAgent.toLowerCase().indexOf("android")>=0,e=i.keyCode==8||i.keyCode==46,s||e||i.key==null||i.key.length!=1||(o=$(t.m_inputSuggest).val(),o!=null&&o!=""&&o.substring(o.length-1)==i.key&&(s=!0)),(s||e)&&(t.control.DataListProc!=null&&t.control.DataListProc!=""?(t.myT!=null&&clearInterval(t.myT),t.myT=setInterval(function(){clearInterval(t.myT);t.Suggest_UpdateList(!e)},300)):t.Suggest_UpdateList(!e))}).keydown(function(i){if(i.keyCode==9){if(t.lastWasKeyDown)i.preventDefault();else if(n.hasClass("open")){var r=n.find(".FilterOptions>ul>li.current");r.length==1?r.find(">a").click():$(t.m_triggerButton).click()}}else i.keyCode==27&&n.hasClass("open")&&(t.valueSet=!0,t.updatedExtendedComboCaption(null),$(t.m_triggerButton).click(),this.setSelectionRange(0,$(this).val().length));t.lastWasKeyDown=!0}).focus(function(){this.setSelectionRange(0,$(this).val().length)}).blur(function(){n.hasClass("open")||(t.autoCloseInitValue=$(this).val());$(this).val()==""&&t.Suggest_SetEmptyValue()}),n.append(r),n.append(this.m_inputSuggest));(this.control.Caption.length>0||this.control.DropDownOptionsType=="ExtendedComboBox"||this.control.DropDownOptionsType=="ExtendedSuggest")&&(li=document.createElement("span"),this.control.DropDownOptionsType=="ExtendedComboBox"||this.control.DropDownOptionsType=="ExtendedSuggest"?(this.m_triggerButtonSpan=li,this.updatedExtendedComboCaption(null)):li.innerText=this.control.Caption,r.appendChild(li));sr=document.createElement("span");sr.className="caret";r.appendChild(sr);this.control.DropDownOptionsType!="ExtendedSuggest"&&n.append(r);n.append(u);this.control.Trigger=="Hover"&&this.TriggerOnHover(r,u);this.control.TitleControlAlign!="Right"&&n.hasClass("open")&&(this.control.TitleControlAlign=="Automatic"?WWP_dropdownAutoPosition("#"+this.containerToDrawName,u,r):WWP_ddo_invertPosition(u,r))}else{for(c=document.createElement("span"),c.className="",di=this.control.Cls.split(/\s+/),it=0;it<di.length;it++)c.className!=""&&(c.className+=" "),c.className+="Readonly"+di[it];this.control.AllowMultipleSelection&&this.control.SelectedText!=null&&WWP_startsWith(this.control.SelectedText,"[")&&WWP_endsWith(this.control.SelectedText,"]")?c.innerText=this.GetMultipleSelection_ReadonlyCaption(JSON.parse(this.control.SelectedText)):this.hasHTMLTemplate()?this.control.DropDownOptionsType=="ExtendedSuggest"?c.innerText=this.extendedComboCaption_GetHTMLUsingTemplate(this.control.SelectedText,!0):c.innerHTML=this.extendedComboCaption_GetHTMLUsingTemplate(this.control.SelectedText,!1):c.innerText=this.control.SelectedText;n.append(c);c=document.createElement("span");c.className="Readonly"+this.control.Cls;c.style.display="none";n.append(c);this.control.EmptyItem&&this.control.SelectedValue==""&&n.addClass("ExtendedComboEmptyValue");n.addClass("ReadonlyExtendedCombo")}if(bi&&(this.control.DropDownOptionsType=="ExtendedSuggest"?$(this.m_inputSuggest).focus():$("#"+this.containerToDrawName).find("button").focus()),(this.control.DropDownOptionsType=="ExtendedComboBox"||this.control.DropDownOptionsType=="ExtendedSuggest")&&bt.length>0){var vr=this.control.Enabled?null:n.find("span").get(0),yr=$("#"+this.containerToDrawName+(this.control.DropDownOptionsType=="ExtendedComboBox"?"_btnGroupDrop":"_inputSuggest")),pr=yr.get(0);for(it=0;it<bt.length;it++)hr=bt[it],yr.is(":visible")?gx.fn.alert(pr,hr):vr&&gx.fn.alert(vr,hr)}};this.Suggest_SetEmptyValue=function(){if(this.control.SelectedValue_set!=""&&this.control.SelectedText_set!=""){this.SetSelectedValue("");this.SetSelectedText("");var n=this.control.extendedCombo_getAttributeInfo();n!=null&&this.extendedCombo_UpdateRealAttVal(n);this.control.OnOptionClicked&&this.control.OnOptionClicked()}};this.Suggest_UpdateList=function(n){var t=$(this.m_triggerButton.parentElement),i,r;t.find(".FilterOptions>ul>li.current").removeClass("current");var u=$(this.m_inputSuggest),e=u.val().length>=1,f=t.hasClass("open");this.autocomplete=n;this.autoClose=!1;this.doNotFocus=!1;this.valueSet=!1;i=this.autoCloseInitValue;this.autoCloseInitValue!=null&&delete this.autoCloseInitValue;e!=f&&(this.control.DataListProc!=null&&this.control.DataListProc!=""&&document.activeElement!=this.m_inputSuggest&&(this.autoClose=!0,i!=null&&$(this.m_inputSuggest).val(i)),$(this.m_triggerButton).click());f&&(r=t.find(".FilterOptions>ul")[0],$(r.parentElement).scrollTop(0),this.updateExtendedComboList(r,u.val()))};this.Suggest_MakeLIVisible=function(n,t){var u=n.offset().top,r=u,f=n.height(),e=r+f,i=t.offset().top,o=t.height(),s=i+o,h;i>=r&&i<e&&s>r&&s<=e||(h=n.scrollTop(),n.scrollTop(i+h-u-(i>=r?f-o:0)))};this.TF_IsNumericFilter=function(){return this.control.FilterType=="Numeric"&&this.control.DataListType!="Dynamic (with fixedValues)"&&this.control.DataListType!="FixedValues"};this.GetMultipleSelection_ReadonlyCaption=function(n){for(var i="",t=0;t<n.length;t+=1)i+=(t>0?this.control.MultipleValuesSeparator:"")+n[t];return i};this.TriggerOnHover=function(n,t){$(n).on("mouseenter",function(){$(n).data("mouseOnBtn","").data("mouseOnUL",null);$(n).parent().hasClass("open")||$(n).click()}).on("mouseleave",function(){$(n).data("mouseOnBtn",null);$(n).parent().hasClass("open")&&window.setTimeout(function(){$(n).data("mouseOnUL")==null&&$(n).parent().hasClass("open")&&$(n).click()},100)});$(t).on("mouseenter",function(){$(n).data("mouseOnBtn",null).data("mouseOnUL","");$(n).parent().hasClass("open")||$(n).click()}).on("mouseleave",function(){$(n).data("mouseOnUL",null);$(n).parent().hasClass("open")&&window.setTimeout(function(){$(n).data("mouseOnBtn")==null&&$(n).parent().hasClass("open")&&$(n).click()},100)})};this.DDComponentHide=function(n){this.control.KeepOpened=WWP_FixBooleanProperty(this.control.KeepOpened);var t=this;n.on("hide.bs.dropdown",function(){var i=!0,r;return t.control.closingProgramatically||t.DDC_hidding_clicked=="button"||(r=n[0].children[n[0].children.length-1],$(r).find('.open:not(.clickedInside)>[data-toggle="dropdown"]').each(function(){$(this).parent().removeClass("open")}),i=t.control.KeepOpened?!1:t.DDC_hidding_clicked!="inside"),i&&WWP_revertWCMoved(t.DDComponent_getWCParentDivName(),t.control,n.find(">button")[0],t.control.Load=="OnEveryClick"),t.DDC_hidding_clicked=null,i}).on("click",function(i){if($(this).hasClass("open")){var r=i.originalEvent!=null?i.originalEvent.target:i.target;r!=null&&(r==t.m_triggerButton||$(r).closest("#"+t.m_triggerButton.id).length==1?t.DDC_hidding_clicked="button":(t.DDC_hidding_clicked="inside",$(this).addClass("clickedInside")),window.setTimeout(function(){t.DDC_hidding_clicked=null;n.removeClass("clickedInside")},100))}});if(t.control.OnClose)n.on("show.bs.dropdown",function(){t.control.Result=""}).on("hidden.bs.dropdown",function(){t.control.Result=="OK"&&WWP_endsWith(t.containerName,"DDC_NATURALLANGUAGEQUERYContainer")&&WWPDynFilterHideAll_AL(WWP_getParentWCId(t.control)+"TABLEDYNAMICFILTERS",999,0);t.control.OnClose()});$(t.m_triggerButton).data("wwpControl",this)};this.DDComponent_getWCParentDivName=function(){return"DIV_"+(this.control.Load=="OnEveryClick"?"WWPAUXWC":this.control.ControlName)};this.DDComponentShown=function(){var e,i,o,u,s,t,r,h;this.DDC_hidding_clicked=null;e=WWP_getWCId(this.DDComponent_getWCParentDivName(),this.control);this.m_UlDropDown.childNodes.length==0?(o=document.createElement("li"),this.m_UlDropDown.appendChild(o),i=$(o)):(i=$(this.m_UlDropDown).find(">li"),i.html(""));$(this.m_UlDropDown).addClass("DDComponentUL");u=$(window).width();s=parseInt(this.control.ComponentWidth+"");s>0?$(this.m_UlDropDown).css("min-width",Math.min(s,u)):$(this.m_UlDropDown).css("min-width","");$(this.m_UlDropDown).css("max-width","");parseInt($(this.m_UlDropDown).css("max-width"))>u&&$(this.m_UlDropDown).css("max-width",u);this.control.TitleControlAlign=="Automatic"?WWP_dropdownAutoPosition("#"+this.containerToDrawName,this.m_UlDropDown,this.m_triggerButton):WWP_ddo_invertPosition(this.m_UlDropDown,this.m_triggerButton);var c=this.control.Load=="OnEveryClick"||this.control.Load=="OnFirstClick"&&$("#"+e).children().length==0,f=this.control.ShowLoading&&c,n=document.createElement("div");f?($(n).css("display","none"),t=document.createElement("div"),t.innerHTML='<div class="WCD_Loading"><i class="fas fa-spinner fa-spin"><\/i><\/div>',i.append(t),t.appendChild(n),$(t).css("min-height",$(t).height())):i.append(n);r=WWP_moveWCToDiv(e,this.control,f,n);h=this;f&&window.setTimeout(function(){h.DDComponentShown_WCLoaded(n,r)},3e3);c&&(r.html(""),f&&(this.DDComponentShown_WCRenderHandler=function(t){t.containerControl==r[0]&&h.DDComponentShown_WCLoaded(n,r)},gx.fx.obs.addObserver("webcom.render",window,this.DDComponentShown_WCRenderHandler)),this.control.OnLoadComponent!=null&&this.control.OnLoadComponent())};this.DDComponentShown_WCLoaded=function(n,t){if($(n).css("display")=="none"){WWP_Debug_Log(!1,"DDComponentShown_WCLoaded");var i=this;window.setTimeout(function(){$(n).parent().find(".WCD_Loading").remove();t.find(".gxwebcomponent-body").removeClass("Invisible");$(n).slideDown(function(){$(this.parentElement).css("min-height","");i.control.TitleControlAlign=="Automatic"?WWP_dropdownAutoPosition("#"+i.containerToDrawName,i.m_UlDropDown,i.m_triggerButton):WWP_ddo_invertPosition(i.m_UlDropDown,i.m_triggerButton);$(this.parentElement).find(".FocusOnShown").focus();WWP_GXEAIInfo($(this.parentElement))});i.DDComponentShown_WCRenderHandler!=null&&(gx.fx.obs.deleteObserver("webcom.render",window,i.DDComponentShown_WCRenderHandler),delete i.DDComponentShown_WCRenderHandler)},200)}};this.isEnabled=function(){if(this.control.IsGridItem){if(this.IsTrnInDisplayMode)return!1;var n=$("#"+this.realId);return!n.hasClass("gx-disabled")&&(n.attr("style")+"").indexOf("none")==-1}return this.control.Enabled};this.updateColumnSelectorDataBeforeGxEvent=function(){for(var n=0;n<this.ColumnsSelectorData_Aux.Columns.length;n+=1)delete this.ColumnsSelectorData_Aux.Columns[n].fixedL,delete this.ColumnsSelectorData_Aux.Columns[n].fixedR,delete this.ColumnsSelectorData_Aux.Columns[n].configFixedL,delete this.ColumnsSelectorData_Aux.Columns[n].configFixedR,delete this.ColumnsSelectorData_Aux.Columns[n].freezable,this.ColumnsSelectorData_Aux.Columns[n].O++;this.control.ColumnsSelectorValues=JSON.stringify(this.ColumnsSelectorData_Aux,null,2);this.control.DropDownOptionsData=this.ColumnsSelectorData_Aux};this.loadExtendedComboSelectedText=function(n,t,i){var e,u,o,s,r,f;if(this.control.DataListType=="FixedValues"&&(n=this.ExtendedCombo_getFixedValues()),t==null&&this.control.AllowMultipleSelection){if(t=this.control.SelectedValue!=null&&this.control.SelectedValue!=""?JSON.parse(this.control.SelectedValue):[],t.length==0)return!1;for(this.m_SelectedTextJson=[],r=0;r<t.length;r+=1)this.m_SelectedTextJson.push(t[r])}for(e=0;n!=null&&e<n.length;e+=1)if(u=n[e],u.C!=null&&u.C.length>0){if(this.loadExtendedComboSelectedText(u.C,t,!1)&&!this.control.AllowMultipleSelection)return!0}else{if(o=!1,s=-1,this.control.AllowMultipleSelection){for(r=0;r<t.length;r+=1)if(u.ID.trim()==(t[r]+"").trim()){o=!0;s=r;break}}else this.control.SelectedValue!=null&&u.ID.trim()==this.control.SelectedValue.trim()&&(o=!0);if(o)if(f=u.T,f=gx.getMessage(f),this.control.AllowMultipleSelection)this.m_SelectedTextJson.splice(s,1,f);else return this.SetSelectedText(f),!0}return i&&(this.control.AllowMultipleSelection?(this.SetSelectedText(JSON.stringify(this.m_SelectedTextJson,null,2)),this.m_SelectedTextJson=null):this.control.SelectedText==""&&this.SetSelectedText(this.control.SelectedValue)),!1};this.loadExtendedComboBox=function(n){var t,c,o,s,h,r,l,f,v,e,i;if(!this.extendedComboBoxLoaded){if(this.extendedComboBoxLoaded=!0,t=document.createElement("li"),this.control.DropDownOptionsType!="ExtendedSuggest"&&(c=document.createElement("div"),c.setAttribute("style","display: block; margin-right:10px;margin-left:10px;padding-bottom:10px"),o=document.createElement("div"),o.setAttribute("class","gx-attribute"),o.setAttribute("style","margin-right:10px"),s=document.createElement("div"),s.setAttribute("class","input-group"),s.setAttribute("style","width:100%"),o.appendChild(s),c.appendChild(o),h=document.createElement("input"),this.m_filterInput=h,s.appendChild(h),t.appendChild(c),n.appendChild(t),t=document.createElement("li"),this.CreateFilterInput(this.control.FilteredText,t,h,null,null,!1,null,null)),r=document.createElement("ul"),this.ExtendedComboBox_FilterSelected=!1,this.control.IncludeOnlySelectedOption){l=document.createElement("li");l.setAttribute("class","OnlySelected");var u=document.createElement("a"),e=document.createElement("span"),a=gx.getMessage(this.control.OnlySelectedValues==""?wwp.labels.OnlySelectedValues:this.control.OnlySelectedValues);a.indexOf("<SELECTED_COUNT>")!=-1&&(this.OnlySelectedItem_span=e,a=WWP_replaceAll(a,"<SELECTED_COUNT>","0"));e.innerHTML=a;u.className="image";u.setAttribute("style","margin-bottom:10px");this.control.DropDownOptionsTitleSettingsIcons_IsFI?(i=document.createElement("i"),i.setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons.mul),u.appendChild(i)):(i=document.createElement("img"),i.setAttribute("src",gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons.MultiselOption)),u.appendChild(i));$(u).on("click",function(n,t){return function(){var i=this.getAttribute("sel")!="T";i?this.setAttribute("sel","T"):this.removeAttribute("sel");n.control.DropDownOptionsTitleSettingsIcons_IsFI?t.setAttribute("class",n.control.DropDownOptionsTitleSettingsIcons[i?"muls":"mul"]):t.setAttribute("src",gx.util.resolveUrl(n.control.DropDownOptionsTitleSettingsIcons[i?"MultiselSelOption":"MultiselOption"]));n.ExtendedComboBox_FilterSelected=i;n.updateExtendedComboList(r,$(h).val());n.extendedComboBox_UpdateSelectAll_A(null)}}(this,i));$(u).on("click",function(n){n.preventDefault();n.stopPropagation()});u.appendChild(e);l.appendChild(u);n.appendChild(l)}if(f=document.createElement("div"),f.className=this.control.AllowMultipleSelection?"FilterOptions FilterOptionsMultiSelection":"FilterOptions",this.loadExtendedComboBoxItems(r,this.control.DropDownOptionsData,0,null,!1),f.appendChild(r),t.appendChild(f),n.appendChild(t),this.control.DataListProc!=null&&this.control.DataListProc!=""&&(t=document.createElement("li"),this.addLoadingOption(t),n.appendChild(t),this.m_loadingLi=t,$(this.m_loadingLi).css("display","none"),wwp.settings.columnsSelector.InfiniteScrolling&&(v=this,$(f).scroll(function(){r.childNodes.length>0&&$(r).is("[wwp-fetch-more]")&&$(f).find(">*:eq(0)").height()-$(f).height()-$(this).scrollTop()<=20&&($(r).attr("wwp-fetch-more",null),v.updateExtendedComboList(r,v.control.DropDownOptionsType=="ExtendedSuggest"?$(r).attr("fetching-search-txt"):$(v.m_filterInput).val(),!0))}))),this.ExtendedComboBox_SelectAll=null,this.ExtendedComboBox_SelectAll_A=null,this.extendedComboBox_UL=r,this.control.IncludeSelectAllOption){t=document.createElement("li");t.setAttribute("class","SelectAll");this.ExtendedComboBox_SelectAll_A=document.createElement("a");e=document.createElement("span");e.innerHTML=gx.getMessage(this.control.SelectAllText==""?wwp.labels.SelectAll:this.control.SelectAllText);this.ExtendedComboBox_SelectAll_A.className="image";this.ExtendedComboBox_SelectAll_A.setAttribute("style","margin-bottom:10px");this.control.DropDownOptionsTitleSettingsIcons_IsFI?(i=document.createElement("i"),i.setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons.mul)):(i=document.createElement("img"),i.setAttribute("src",gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons.MultiselOption)));this.ExtendedComboBox_SelectAll_A.appendChild(i);$(this.ExtendedComboBox_SelectAll_A).on("click",function(n,t){return function(){var f=this.getAttribute("sel")!="T",e,u,i,o;for(f?this.setAttribute("sel","T"):this.removeAttribute("sel"),n.control.DropDownOptionsTitleSettingsIcons_IsFI?t.setAttribute("class",n.control.DropDownOptionsTitleSettingsIcons[f?"muls":"mul"]):t.setAttribute("src",gx.util.resolveUrl(n.control.DropDownOptionsTitleSettingsIcons[f?"MultiselSelOption":"MultiselOption"])),n.ExtendedComboBox_SelectAll_A=null,this.extendedComboBox_DisableParentsUpdating=!0,e=0;e<r.childNodes.length;e+=1)u=r.childNodes[e],i=u.childNodes[0],($(u).css("display")!="none"||n.extendedComboBox_IsOptionVisibleAndCollapsed(u))&&($(i).hasClass("ExtendedComboLevelWithChildren")?i.getAttribute("expanded")!="true"&&(i.setAttribute("expanded","true"),n.control.DropDownOptionsTitleSettingsIcons_IsFI?(o=$(i).find("i"),o[o.length-1].setAttribute("class",n.control.DropDownOptionsTitleSettingsIcons.tcol)):$(i.childNodes[i.childNodes.length-1]).css("background-image","url("+gx.util.resolveUrl(n.control.DropDownOptionsTitleSettingsIcons.TreeviewCollapse)+")")):(f&&i.getAttribute("sel")!="T"||!f&&i.getAttribute("sel")=="T")&&i.click(),$(u).css("display")=="none"&&$(u).css("display",""));this.extendedComboBox_DisableParentsUpdating=!1;n.ExtendedComboBox_SelectAll_A=this}}(this,i));$(this.ExtendedComboBox_SelectAll_A).on("click",function(n){n.preventDefault();n.stopPropagation()});this.ExtendedComboBox_SelectAll_A.appendChild(e);t.appendChild(this.ExtendedComboBox_SelectAll_A);n.appendChild(t)}}};this.extendedComboBox_UpdateParentsSelection=function(n){var r,i;if(!this.extendedComboBox_DisableParentsUpdating==!0){for(var f=n.childNodes[0].getAttribute("sel")=="T",u=parseInt(($(n).is("[loading-option]")?n.previousSibling:n).childNodes[0].getAttribute("level")),t=n;(t=t.previousSibling)!=null&&parseInt(t.childNodes[0].getAttribute("level"))>u-1;);if(t!=null)if(f){for(r=!0,i=t;(i=i.nextSibling)!=null&&parseInt(i.childNodes[0].getAttribute("level"))>=u;)if(i.childNodes[0].getAttribute("sel")!="T"&&parseInt(i.childNodes[0].getAttribute("level"))==u&&($(i).css("display")!="none"||this.extendedComboBox_IsOptionVisibleAndCollapsed(i))){r=!1;break}(r&&t.childNodes[0].getAttribute("sel")!="T"||!r&&t.childNodes[0].getAttribute("sel")=="T")&&(t.childNodes[0].setAttribute("sel",r?"T":""),this.control.DropDownOptionsTitleSettingsIcons_IsFI?$(t.childNodes[0]).find("i")[0].setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons[r?"muls":"mul"]):$(t.childNodes[0].childNodes[0]).css("background-image","url("+gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons[r?"MultiselSelOption":"MultiselOption"])+")"),this.extendedComboBox_UpdateParentsSelection(t))}else t.childNodes[0].getAttribute("sel")=="T"&&(t.childNodes[0].removeAttribute("sel"),this.control.DropDownOptionsTitleSettingsIcons_IsFI?$(t.childNodes[0]).find("i")[0].setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons.mul):$(t.childNodes[0].childNodes[0]).css("background-image","url("+gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons.MultiselOption)+")"),this.extendedComboBox_UpdateParentsSelection(t))}};this.extendedComboBox_IsOptionVisibleAndCollapsed=function(n){var t,r,i;if($(this.m_filterInput).val()==""&&!this.ExtendedComboBox_FilterSelected||this.control.DataListProc!=null&&this.control.DataListProc!=""&&!this.ExtendedComboBox_FilterSelected||(t=n.childNodes[0],t.getAttribute("filtered")=="true"))return!0;if(t.getAttribute("level")!="0")for(r=parseInt(t.getAttribute("level"))-1;(n=n.previousSibling)!=null;)if(i=n.childNodes[0],parseInt(i.getAttribute("level"))==r){if(i.getAttribute("filteredChildren")=="true")return!1;if(i.getAttribute("filtered")=="true")return!0;r--}return!1};this.extendedComboBox_SelectSelectAll_A=function(n){this.ExtendedComboBox_SelectAll_A!=null&&(n?this.ExtendedComboBox_SelectAll_A.getAttribute("sel")!="T"&&(this.ExtendedComboBox_SelectAll_A.setAttribute("sel","T"),this.control.DropDownOptionsTitleSettingsIcons_IsFI?this.ExtendedComboBox_SelectAll_A.childNodes[0].setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons.muls):this.ExtendedComboBox_SelectAll_A.childNodes[0].setAttribute("src",gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons.MultiselSelOption))):this.ExtendedComboBox_SelectAll_A.getAttribute("sel")=="T"&&(this.ExtendedComboBox_SelectAll_A.removeAttribute("sel"),this.control.DropDownOptionsTitleSettingsIcons_IsFI?this.ExtendedComboBox_SelectAll_A.childNodes[0].setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons.mul):this.ExtendedComboBox_SelectAll_A.childNodes[0].setAttribute("src",gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons.MultiselOption))))};this.extendedComboBox_UpdateSelectAll_A=function(n){var t,i;if(this.ExtendedComboBox_SelectAll_A!=null)if(n!=null&&n.childNodes[0].getAttribute("sel")!="T")this.extendedComboBox_SelectSelectAll_A(!1);else{for(t=!1,i=0;i<this.extendedComboBox_UL.childNodes.length;i+=1){if(n=this.extendedComboBox_UL.childNodes[i],n.childNodes[0].getAttribute("sel")!="T"&&!$(n.childNodes[0]).hasClass("ExtendedComboLevelWithChildren")&&($(n).css("display")!="none"||this.extendedComboBox_IsOptionVisibleAndCollapsed(n))){this.extendedComboBox_SelectSelectAll_A(!1);return}!t&&($(n).css("display")!="none"||this.extendedComboBox_IsOptionVisibleAndCollapsed(n))&&(t=!0)}this.extendedComboBox_SelectSelectAll_A(t)}};this.extendedComboBox_UpdateNodeWithChildrenSelection=function(){if(this.extendedComboBox_UL!=null)for(var n=0;n<this.extendedComboBox_UL.childNodes.length;n+=1)li=this.extendedComboBox_UL.childNodes[n],!$(li.childNodes[0]).hasClass("ExtendedComboLevelWithChildren")&&($(li).css("display")!="none"||this.extendedComboBox_IsOptionVisibleAndCollapsed(li))&&this.extendedComboBox_UpdateParentsSelection(li)};this.ExtendedCombo_getFixedValues=function(){var o=[],r=this.control.DataListFixedValues,e,u,t,f,n,i;for(r=WWP_replaceAll(r,"\\\\","[\\\\]"),r=WWP_replaceAll(r,"\\,","[\\\\\\]"),e=r.split(","),u=0;u<e.length;u+=1)t=e[u],t=WWP_replaceAll(t,"[\\\\\\]",","),t=WWP_replaceAll(t,"\\:","[\\\\\\]"),f=t.split(":"),n=f[0],n=WWP_replaceAll(n,"[\\\\\\]",":"),n=WWP_replaceAll(n,"[\\\\]","\\"),f.length>1?(i=f[1],i=WWP_replaceAll(i,"[\\\\\\]",":"),i=WWP_replaceAll(i,"[\\\\]","\\")):n=n,o.push({ID:i,T:n});return o};this.hasHTMLTemplate=function(){return this.control.HTMLTemplate!=""};this.items_AddNoResultsFound=function(n){var i=document.createElement("li"),t=document.createElement("a"),r=document.createElement("span"),u;t.setAttribute("dsc","");i.setAttribute("noData","");r.innerHTML=gx.getMessage(this.control.NoResultsFound!=""?this.control.NoResultsFound:wwp.labels.NoResultsFound);t.setAttribute("href",DDO_GetLocalURL());navigator.appVersion.toLowerCase().match("msie 8")||navigator.appVersion.toLowerCase().match("msie 7")||navigator.appVersion.toLowerCase().match("msie 9")||t.setAttribute("data-toggle","dropdown");u=this;$(t).on("click",function(n){u.control.SetFocus();n.preventDefault();n.stopPropagation()});t.appendChild(r);i.appendChild(t);n.appendChild(i)};this.loadExtendedComboBoxItems=function(n,t,i,r,u,f,e,o){var ft,c,g,a,b,k,p,v,it,w,rt,s;if(r==null&&this.control.AllowMultipleSelection&&(r=this.control.SelectedValue!=null&&this.control.SelectedValue!=""?JSON.parse(this.control.SelectedValue):[]),this.control.DataListType=="FixedValues"&&(t=this.ExtendedCombo_getFixedValues()),i==0&&u&&(t==null||t.length==0)&&!this.control.IncludeAddNewOption)this.items_AddNoResultsFound(n);else{i==0&&this.control.DropDownOptionsType=="ExtendedSuggest"&&(this.control.DataListProc==null||this.control.DataListProc=="")&&this.items_AddNoResultsFound(n);var et=this.control.extendedCombo_getAttributeInfo(),ct=et!=null,ot=!1,lt=(t!=null?t.length:0)+(i==0&&!o&&this.control.IncludeAddNewOption?1:0),d=!1,ut=!1;for(i==0&&e&&t!=null&&t.length>0&&$("#"+this.containerToDrawName).closest(".ExtendedCombo").hasClass("ExtendedComboWithCategories")&&(ft=$(n).find(">li[cat-id]").last(),ft.attr("cat-id")==t[0].ID.trim()&&(d=!0,ut=ft.find(">a").attr("expanded")=="false")),c=e||this.control.AllowMultipleSelection||!this.control.EmptyItem||i>0?0:-1;c<lt;c+=1){if(g=!1,c==(t==null?0:t.length)?(g=!0,a={ID:"<#NEW#>",T:gx.getMessage(this.control.AddNewOptionText==""?wwp.labels.AddNewOption:this.control.AddNewOptionText)}):a=c>=0?t[c]:{ID:"",T:gx.getMessage(this.control.EmptyItemText)},b=a.ID.trim(),!d){var nt=a.C==null||a.C.length==0,st=nt&&this.hasHTMLTemplate()&&c>=0&&c<t.length,ht,y=a.T,l=document.createElement("li"),h=document.createElement("a"),tt=document.createElement("span"),at=y;if(y=gx.getMessage(at),h.setAttribute("dsc",y),nt||ot||($("#"+this.containerToDrawName).closest(".ExtendedCombo").addClass("ExtendedComboWithCategories"),ot=!0),st?ht=this.extendedComboCaption_GetHTMLUsingTemplate(y):(tt.setAttribute("class","OptionLabel"),tt.innerText=y!=""||!this.control.AllowMultipleSelection?y:gx.getMessage("WWP_MultipleSelectionEmptyItem"),g&&(h.setAttribute("add-new-option",""),$(l).addClass("ExtendedComboNewOption"))),h.setAttribute("level",i),k=null,nt){if(h.setAttribute("class","ExtendedComboLevel"+i),v=!1,this.control.DropDownOptionsType=="ExtendedSuggest")$(l).data("val",b);else if(this.control.SelectedValue!="")if(this.control.AllowMultipleSelection){for(it=0;it<r.length;it+=1)if(b==(r[it]+"").trim()){v=!0;break}}else b==this.control.SelectedValue.trim()&&(v=!0);else v=c==-1;if(v&&(h.setAttribute("sel","T"),this.m_SelectedLI=l),this.control.AllowMultipleSelection?this.control.DropDownOptionsTitleSettingsIcons_IsFI?(w=document.createElement("i"),w.setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons[v?"muls":"mul"]),h.appendChild(w)):($(h).css("background-image","url("+gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons[v?"MultiselSelOption":"MultiselOption"])+")"),$(h).css("background-repeat","no-repeat"),$(h).css("background-position","5px 60%")):v&&$(l).addClass("SelectedItem"),this.ExtendedComboBox_FilterSelected)if(h.getAttribute("sel")!="T")$(l).css("display","none");else for(rt=i-1;rt>=0;rt--)$(n).find(">li>a.ExtendedComboLevel"+rt).last().parent().css("display","")}else{if(this.control.DropDownOptionsTitleSettingsIcons_IsFI?(k=document.createElement("i"),k.setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons.tcol)):$(tt).css("background-image","url("+gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons.TreeviewCollapse)+")"),h.setAttribute("class","ExtendedComboLevel"+i+" ExtendedComboLevelWithChildren"),h.setAttribute("expanded","true"),this.control.AllowMultipleSelection){p=document.createElement("span");p.setAttribute("class","SelectAllChildren");this.control.DropDownOptionsTitleSettingsIcons_IsFI?(w=document.createElement("i"),w.setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons.mul),p.appendChild(w)):$(p).css("background-image","url("+gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons.MultiselOption)+")");h.appendChild(p);s=this;$(p).on("click",function(){return function(n){var r=this.parentNode.getAttribute("sel")!="T",u,t,f;for(this.parentNode.setAttribute("sel",r?"T":""),s.control.DropDownOptionsTitleSettingsIcons_IsFI?$(this).find("i")[0].setAttribute("class",s.control.DropDownOptionsTitleSettingsIcons[r?"muls":"mul"]):$(this).css("background-image","url("+gx.util.resolveUrl(s.control.DropDownOptionsTitleSettingsIcons[r?"MultiselSelOption":"MultiselOption"])+")"),s.extendedComboBox_DisableParentsUpdating=!0,u=this.parentNode.parentNode;(u=u.nextSibling)!=null&&parseInt(u.childNodes[0].getAttribute("level"))>i;)t=u.childNodes[0],($(u).css("display")!="none"||s.extendedComboBox_IsOptionVisibleAndCollapsed(u))&&($(t).hasClass("ExtendedComboLevelWithChildren")?(t.getAttribute("expanded")!="true"&&(t.setAttribute("expanded","true"),s.control.DropDownOptionsTitleSettingsIcons_IsFI?(f=$(t).find("i"),f[f.length-1].setAttribute("class",s.control.DropDownOptionsTitleSettingsIcons.tcol)):$(t.childNodes[t.childNodes.length-1]).css("background-image","url("+gx.util.resolveUrl(s.control.DropDownOptionsTitleSettingsIcons.TreeviewCollapse)+")")),(r&&t.getAttribute("sel")!="T"||!r&&t.getAttribute("sel")=="T")&&(t.setAttribute("sel",r?"T":""),s.control.DropDownOptionsTitleSettingsIcons_IsFI?$(t).find("i")[0].setAttribute("class",s.control.DropDownOptionsTitleSettingsIcons[r?"muls":"mul"]):$(t.childNodes[0]).css("background-image","url("+gx.util.resolveUrl(s.control.DropDownOptionsTitleSettingsIcons[r?"MultiselSelOption":"MultiselOption"])+")"))):(r&&t.getAttribute("sel")!="T"||!r&&t.getAttribute("sel")=="T")&&t.click(),$(u).css("display")=="none"&&$(u).css("display",""));s.extendedComboBox_DisableParentsUpdating=!1;s.extendedComboBox_UpdateParentsSelection(this.parentNode.parentNode);this.parentNode.getAttribute("expanded")!="true"&&(this.parentNode.setAttribute("expanded","true"),s.control.DropDownOptionsTitleSettingsIcons_IsFI?(f=$(this.parentNode).find("i"),f[f.length-1].setAttribute("class",s.control.DropDownOptionsTitleSettingsIcons.tcol)):$(this.parentNode.childNodes[this.parentNode.childNodes.length-1]).css("background-image","url("+gx.util.resolveUrl(s.control.DropDownOptionsTitleSettingsIcons.TreeviewCollapse)+")"));n.preventDefault();n.stopPropagation()}}())}this.ExtendedComboBox_FilterSelected&&$(l).css("display","none")}s=this;$(h).on("click",function(i,r){return function(){var u=this.parentNode,v,f,y,w,e,o,p,h,a,c,l;if(r>=0&&t!=null&&r<t.length&&t[r].C!=null&&t[r].C.length>0){for(v=parseInt(this.getAttribute("level")),f=this.getAttribute("expanded")=="true",this.setAttribute("expanded",f?"false":"true"),s.control.DropDownOptionsTitleSettingsIcons_IsFI?(y=$(this).find("i"),y[y.length-1].setAttribute("class",s.control.DropDownOptionsTitleSettingsIcons[f?"texp":"tcol"])):$(this.childNodes[this.childNodes.length-1]).css("background-image","url("+gx.util.resolveUrl(s.control.DropDownOptionsTitleSettingsIcons[f?"TreeviewExpand":"TreeviewCollapse"])+")"),w=this.getAttribute("filteredChildren")=="true";(u=u.nextSibling)!=null;)if(parseInt(u.childNodes[0].getAttribute("level"))>=v+1)parseInt(u.childNodes[0].getAttribute("level"))==v+1?f||w&&u.childNodes[0].getAttribute("filtered")!="true"?$(u).css("display","none"):($(u).css("display",""),u.childNodes[0].getAttribute("expanded")=="true"&&(u.childNodes[0].setAttribute("expanded","false"),s.control.DropDownOptionsTitleSettingsIcons_IsFI?$(u.childNodes[0]).find("i")[0].setAttribute("class",s.control.DropDownOptionsTitleSettingsIcons.texp):$(u.childNodes[0].childNodes[u.childNodes[0].childNodes.length-1]).css("background-image","url("+gx.util.resolveUrl(s.control.DropDownOptionsTitleSettingsIcons.TreeviewExpand)+")"))):$(u).css("display","none");else break;f&&wwp.settings.columnsSelector.InfiniteScrolling&&$(n).parent().scroll()}else{if(e=t!=null&&r<t.length?r>=0?t[r].ID:"":"<#NEW#>",s.control.isNew=e=="<#NEW#>",s.control.isNew&&s.control.IsGridItem&&(s.control.my_dropDownOptions=s),o=null,p=!1,s.control.AllowMultipleSelection){for(h=s.control.SelectedValue==null||s.control.SelectedValue==""?[]:JSON.parse(s.control.SelectedValue),o=s.control.SelectedText==null||s.control.SelectedText==""?[]:JSON.parse(s.control.SelectedText),a=this.getAttribute("sel")=="T",this.setAttribute("sel",a?"":"T"),c=-1,l=0;l<h.length;l+=1)if(h[l]==e){c=l;break}a&&c>=0?(h.splice(c,1),o.splice(c,1),s.control.DropDownOptionsTitleSettingsIcons_IsFI?$(this).find("i")[0].setAttribute("class",s.control.DropDownOptionsTitleSettingsIcons.mul):$(this).css("background-image","url("+gx.util.resolveUrl(s.control.DropDownOptionsTitleSettingsIcons.MultiselOption)+")")):!a&&c<0&&(h.push(e),o.push(i),s.control.DropDownOptionsTitleSettingsIcons_IsFI?$(this).find("i")[0].setAttribute("class",s.control.DropDownOptionsTitleSettingsIcons.muls):$(this).css("background-image","url("+gx.util.resolveUrl(s.control.DropDownOptionsTitleSettingsIcons.MultiselSelOption)+")"));s.SetSelectedValue(JSON.stringify(h,null,2));s.SetSelectedText(JSON.stringify(o,null,2));s.extendedComboBox_UpdateParentsSelection(this.parentNode);s.extendedComboBox_UpdateSelectAll_A(this.parentNode);s.control.IsGridItem&&!s.control.isNew&&(s.realSelectedText=s.control.SelectedText,s.extendedCombo_UpdateGridItemValue(s.control.SelectedValue_get))}else s.SetSelectedValue(e),p=s.control.isNew,s.SetSelectedText(i),s.control.DropDownOptionsType=="ExtendedSuggest"&&($(s.m_inputSuggest).val(i),$(u).addClass("current")),s.m_SelectedLI!=null&&s.m_SelectedLI.removeAttribute("class"),s.m_SelectedLI=u,s.control.DropDownOptionsType!="ExtendedSuggest"&&u.setAttribute("class","SelectedItem"),s.control.IsGridItem&&!s.control.isNew&&(s.realSelectedText=t!=null&&r<t.length?r>=0?t[r].T:"":"",s.extendedCombo_UpdateGridItemValue(e));s.updatedExtendedComboCaption(o);p&&s.SetSelectedText(s.m_filterInput!=null&&$(s.m_filterInput).val()!=null?$(s.m_filterInput).val():"")}}}(y,c));if(h.setAttribute("href",DDO_GetLocalURL()),nt&&!this.control.AllowMultipleSelection){if(navigator.appVersion.toLowerCase().match("msie 8")||navigator.appVersion.toLowerCase().match("msie 7")||navigator.appVersion.toLowerCase().match("msie 9")||h.setAttribute("data-toggle","dropdown"),!g){s=this;$(h).on("click",function(){ct&&s.extendedCombo_UpdateRealAttVal(et);s.control.DropDownOptionsType=="ExtendedSuggest"?(s.doNotFocus||$(s.m_inputSuggest).focus(),s.valueSet=!0):$("#"+s.containerName).find("button").focus()})}if(this.control.OnOptionClicked)$(h).on("click",function(){return function(){s.control.IsGridItem&&s.control.IncludeAddNewOption&&s.control.SelectedValue_get!="<#NEW#>"||s.control.OnOptionClicked()}}())}else $(h).on("click",function(n){n.preventDefault();n.stopPropagation()});st?h.innerHTML+=ht:h.appendChild(tt);k!=null&&h.appendChild(k);l.appendChild(h);n.appendChild(l)}f&&$(l).css("display","none");this.control.DataListType!="FixedValues"&&a.C!=null&&(o&&!d&&$(l).attr("cat-id",b),this.loadExtendedComboBoxItems(n,a.C,i+1,r,u,ut));d=!1;ut=!1}}};this.extendedCombo_UpdateRealAttVal=function(n){var t=n.wcName+n.attName;this.control.lastComboVarValue=$(n.comboVarSelector).val();$("#"+t).val(this.control.lastComboVarValue);var i=this,r=window.MutationObserver||window.WebKitMutationObserver,u=new r(function(r,u){u.disconnect();i.control.lastComboVarValue=$(n.comboVarSelector).val();$("#"+t).val(i.control.lastComboVarValue);WWP_GxValidControl(t)});u.observe($(n.comboVarSelector)[0],{attributes:!0})};this.extendedCombo_UpdateGridItemValue=function(n){var t=$("#"+this.realId),r,u,i;if((t.hasClass("ErrorAttribute")||!t.next().hasClass("ExtendedCombo"))&&t.next().find(">.ErrorMessages").html("<span dummy><\/span>"),t.focus().val(n).change(),r=t.closest(".DVelopComboGridCell,.DVelopComboFSGridCell").parent().find(">td.gx-remove-row"),r.length==1&&r.find(".gx-grid-delete").css("display")=="none"&&t.change(),u=gx.O,i=u.getValidStructFld(this.realId),i!=null){gx.csv.validControls(i.id,i.id+1,!0,u);var e=t.closest(".gx-grid").hasClass("gx-freestyle-grid"),f=t.closest(".DVelopComboGridCell,.DVelopComboFSGridCell"),o=this;window.setTimeout(function(){t.hasClass("ErrorAttribute")&&t.next().find(">.ErrorMessages>span[dummy]").length==0&&o.control.controlRenderGridItem(o.realId);var n=e?f.closest("[data-gxrow]"):f.parent();n.find(e?".DVelopComboFSGridCell":">.DVelopComboGridCell").each(function(){if(f[0]!=this){var n=$(this).data("ddo");n!=null&&n.control.controlRenderGridItem(n.realId)}})},200)}};this.extendedComboCaption_GetHTMLUsingTemplate=function(n,t){var r,i,u,e,f;if(n!=null&&n.trim()!=""){if(this.control.EmptyItem&&n==gx.getMessage(this.control.EmptyItemText))return n;r=document.createElement("span");i=null;try{i=JSON.parse(n)}catch(o){}if(i==null||i.length==null)return u=i!=null&&i.text!=null?i.text:n,this.control.DropDownOptionsType=="ExtendedSuggest"?u:(r.innerText=u,r.innerHTML);if(t)return u=i.length>0?i[0]:"",this.control.DropDownOptionsType=="ExtendedSuggest"?u:(r.innerText=u,r.innerHTML);for(e=this.control.HTMLTemplate,f=Math.max(i.length!=null?i.length:0,10);f>0;f--)r.innerText=i.length>=f?i[f-1]:"",e=WWP_replaceAll(e,"%"+f,WWP_replaceAll(r.innerHTML,"%","[%]"));return WWP_replaceAll(e,"[%]","%")}return""};this.updatedExtendedComboCaption=function(n){var i="",r,u,t;if(this.control.AllowMultipleSelection){if(n==null&&(n=this.control.SelectedText==null||this.control.SelectedText==""?[]:JSON.parse(this.control.SelectedText)),n.length>0)for(r=0;r<n.length;r+=1)this.control.MultipleValuesType=="Tags"?(i+='<span class="DDO_Tags">',this.hasHTMLTemplate()?i+=this.extendedComboCaption_GetHTMLUsingTemplate(n[r],!0):(u=n[r],i+=u!=""?u:gx.getMessage("WWP_MultipleSelectionEmptyItem")),WWP_IsIE()||(i+='<span class="DDO_Tags_del"><\/span>'),i+="<\/span>"):(i+=r>0?this.control.MultipleValuesSeparator:"",i+=this.hasHTMLTemplate()?this.extendedComboCaption_GetHTMLUsingTemplate(n[r],!0):n[r]);else i=this.control.EmptyItem?gx.getMessage(this.control.EmptyItemText):"";this.control.MultipleValuesType=="Tags"&&n.length>0?(this.m_triggerButtonSpan.innerHTML=i,t=this,$(t.m_triggerButtonSpan).find(".DDO_Tags").click(function(n){n.preventDefault();n.stopPropagation()}),$(t.m_triggerButtonSpan).find(".DDO_Tags_del").click(function(n){var u=$("#"+t.containerName).hasClass("open"),r;!u&&t.control.IsGridItem&&(t.control.SelectedValue=t.getGridItemSelectedValue(),t.control.SelectedText=t.realSelectedText!=null?t.realSelectedText:"");var f=t.control.SelectedValue==null||t.control.SelectedValue==""?[]:JSON.parse(t.control.SelectedValue),i=t.control.SelectedText==null||t.control.SelectedText==""?[]:JSON.parse(t.control.SelectedText),e=$(this.parentNode).index();f.splice(e,1);i.splice(e,1);t.SetSelectedValue(JSON.stringify(f,null,2));t.SetSelectedText(JSON.stringify(i,null,2));t.updatedExtendedComboCaption(i);t.extendedComboBoxLoaded&&((t.control.DataListProc==null||t.control.DataListProc=="")&&(t.extendedComboBox_UL.innerHTML="",t.loadExtendedComboBoxItems(t.extendedComboBox_UL,t.control.DropDownOptionsData,0,null,!1)),t.updateExtendedComboList(t.extendedComboBox_UL,$(t.m_filterInput).val()));t.control.IsGridItem&&(t.realSelectedText=t.control.SelectedText,t.extendedCombo_UpdateGridItemValue(t.control.SelectedValue_get));!u&&t.control.OnOptionClicked&&(r=t.control.extendedCombo_getAttributeInfo(),r!=null&&t.extendedCombo_UpdateRealAttVal(r),t.control.OnOptionClicked());n.preventDefault();n.stopPropagation()})):(this.m_triggerButtonSpan.innerText=i,this.control.MultipleValuesSeparator=="<br />"&&(this.m_triggerButtonSpan.innerHTML=WWP_replaceAll(this.m_triggerButtonSpan.innerHTML,"&lt;br /&gt;","<br />")));this.OnlySelectedItem_span!=null&&(this.OnlySelectedItem_span.innerHTML=WWP_replaceAll(gx.getMessage(this.control.OnlySelectedValues),"<SELECTED_COUNT>",n.length))}else i=this.control.SelectedText!="<#NEW#>"?this.control.SelectedText:"",this.control.DropDownOptionsType=="ExtendedSuggest"?this.hasHTMLTemplate()?$(this.m_inputSuggest).val(this.extendedComboCaption_GetHTMLUsingTemplate(i,!0)):$(this.m_inputSuggest).val(i):this.hasHTMLTemplate()?this.m_triggerButtonSpan.innerHTML=this.extendedComboCaption_GetHTMLUsingTemplate(i):this.m_triggerButtonSpan.innerText=i;this.control.Caption=i};this.updateColumnsSelectorValuesIndex=function(n,t){var i=this.columnsSelectorGetCurrentOrderIndex(n),r=this.columnsSelectorGetCurrentOrderIndex(t);this.updateColumnsSelectorValuesIndexByOrderIndexes(i,r)};this.updateColumnsSelectorValuesIndexByOrderIndexes=function(n,t){var u,r,i;if(n!=t)for(u=n>t,r=0;r<this.ColumnsSelectorData_Aux.Columns.length;r+=1)i=this.ColumnsSelectorData_Aux.Columns[r].O,n==i?this.ColumnsSelectorData_Aux.Columns[r].O=t:!u&&i>n&&i<=t?this.ColumnsSelectorData_Aux.Columns[r].O=i-1:u&&i<n&&i>=t&&(this.ColumnsSelectorData_Aux.Columns[r].O=i+1)};this.columnsSelectorGetCurrentOrderIndex=function(n){for(var t=0;t<this.ColumnsSelectorData_Aux.Columns.length;t+=1)if(this.ColumnsSelectorData_Aux.Columns[t].C==n)return this.ColumnsSelectorData_Aux.Columns[t].O;return-1};this.columnsSelectorGetObjectByValue=function(n){for(var t=0;t<this.ColumnsSelectorData_Aux.Columns.length;t+=1)if(this.ColumnsSelectorData_Aux.Columns[t].C==n)return this.ColumnsSelectorData_Aux.Columns[t];return null};this.loadColumnsSelectorValues=function(n,t){var r,f,a,u,i,o,s,c;for(this.AllowColumnReordering=wwp.settings.columnsSelector.AllowColumnReordering&&WWP_HasGridEmpowerer(this.control),$(n).html(""),r=0;r<3;r+=1)if(f=r==0?t!=null?null:this.control.DropDownOptionsData_VisibleColumns:r==1?t!=null?null:this.control.DropDownOptionsData_InvisibleColumns:t!=null?t.Columns:this.control.DropDownOptionsData_Columns,f!=undefined){if(a=!1,r==2)for(u=0;u<f.length;u+=1)if(f[u].G!=null&&f[u].G!=""){a=!0;break}var h=null,p=!1,w=!1,e=!1,v=WWP_HasGridEmpowerer(this.control)?WWP_GetEmpowerer(this.control):null,e=this.AllowColumnReordering&&v!=null&&v.TitleSettingsHelper!=null&&v.TitleSettingsHelper.Fixable.indexOf("T")>=0;for(e&&($(n).addClass("CSItemsFreezable"),this.loadColumnsSelectorValues_addLI(n,r,{configFixedL:!0,isFixableCat:!0},"DummyCatFL",wwp.labels.ColumnSelectorFixedLeftCategory,"",!0,!0,e)),u=0;u<=f.length;u+=1){if(i=null,u<f.length&&(i=f[u],i.O!=null&&this.AllowColumnReordering))for(o=0;o<f.length;o+=1)if(f[o].O==u){i=f[o];break}if(e&&(u!=0||i.F=="L"||i.configFixedL||this.loadColumnsSelectorValues_addLI(n,r,{configFixedL:!0,isFixableCat:!0},"DummyCatFL",wwp.labels.ColumnSelectorFixedEmpty,"",!0,!1,e),p||u!=f.length&&(i.F=="L"||i.configFixedL)||(this.loadColumnsSelectorValues_addLI(n,r,{notFixedCategory:!0,isFixableCat:!0},"DummyCatNoF",wwp.labels.ColumnSelectorNotFixedCategory,"",!0,!0,e),p=!0,(u==f.length||i.F=="R"||i.configFixedR)&&this.loadColumnsSelectorValues_addLI(n,r,{configFixedL:!0,isFixableCat:!0},"DummyCatNoF",wwp.labels.ColumnSelectorFixedEmpty,"",!0,!1,e),h=null),!w&&(u==f.length||i.F=="R"||i.configFixedR)&&(this.loadColumnsSelectorValues_addLI(n,r,{configFixedR:!0,isFixableCat:!0},"DummyCatFR",wwp.labels.ColumnSelectorFixedRightCategory,"",!0,!0,e),w=!0,u==f.length&&this.loadColumnsSelectorValues_addLI(n,r,{configFixedR:!0,isFixableCat:!0},"DummyCatFR",wwp.labels.ColumnSelectorFixedEmpty,"",!0,!1,e),h=null)),u<f.length&&(s=r<2?i.ColumnName:i.C,c=s,r==2&&i.D!=null&&i.D!=""&&(c=i.D),r<2||s!="")){var l=i.G,y=a,b=y&&l!=h;h=l;this.loadColumnsSelectorValues_addLI(n,r,i,s,c,l,y,b,e);b&&this.loadColumnsSelectorValues_addLI(n,r,i,s,c,l,y,!1,e)}}}this.columnsSelector_updateFixableCategoriesValues(n)};this.loadColumnsSelectorValues_addLI=function(n,t,i,r,u,f,e,o,s){var c=this,a=document.createElement("li"),l=document.createElement("a"),w=t==0||t==2&&(i.V+"").toLowerCase()!="false",b=null,p,d,k;if(o?(i.isFixableCat?$(a).addClass("CSFixableCategory"):u=f==""?wwp.labels.ColumnSelectorNotFixedCategory:f,$(l).addClass("CSCategory"),this.control.DropDownOptionsTitleSettingsIcons_IsFI?(b=document.createElement("i"),b.setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons.tcol)):$(p).css("background-image","url("+gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons.TreeviewCollapse)+")")):(e||s)&&($(l).addClass("CSItemWithCategory"),e&&$(l).addClass("CSItemWithUserCategory")),this.AllowColumnReordering&&($(a).data("v",r),o?i.configFixedL||i.fixedL?$(a).addClass("CSCategoryFixedL"):(i.configFixedR||i.fixedR)&&$(a).addClass("CSCategoryFixedR"):i.configFixedL?$(a).addClass("CSItemConfigFixedL"):i.configFixedR?$(a).addClass("CSItemConfigFixedR"):i.fixedL?$(a).addClass("CSItemFixedL"):i.fixedR&&$(a).addClass("CSItemFixedR"),i.freezable&&$(a).addClass("CSItemFreezable"),!i.isFixableCat&&!i.configFixedL&&!i.configFixedR)){l.draggable=!0;var h=null,y=null,v=-1;$(a).on("dragstart",function(){event.stopPropagation();y=$(this);v=y.index();var t=">li";y.parent().hasClass("CSItemsFreezable")&&(y.hasClass("CSItemFreezable")||(t=">li:not(.CSFixableCategory,.CSCategoryFixedL,.CSCategoryFixedR,.CSItemConfigFixedL,.CSItemConfigFixedR,.CSItemFixedL,.CSItemFixedR)"));y.parent().find(t).on("dragover",function(t){var i,f,u,r;if(h!=null&&h.removeClass("WWPDragOverUp WWPDragOverDown"),h=$(this),i=h.index(),$(this).is(".CSFixableCategory.CSCategoryFixedL")&&(h=h.next(),i++),v!=i){if(f=y.find(">a").is(".CSCategory"),u=h.find(">a").is(".CSCategory"),h.is(".CSItemConfigFixedL")||h.is(".CSItemConfigFixedR")||h.is(".CSCategoryFixedL")||h.is(".CSCategoryFixedR")){if(!h.is(".CSCategoryFixedR")){if(v>i)for(h=h.next();h.is(".CSItemConfigFixedL,.CSItemConfigFixedR");)h=h.next();else while(h.is(".CSItemConfigFixedL,.CSItemConfigFixedR,.CSCategoryFixedL"))h=h.prev();i=h.index()}}else if(f){if(!u&&h.find(">a").is(".CSItemWithUserCategory")){for(r=h.prev();r.find(">a").hasClass("CSItemWithUserCategory");)r=r.prev();h=r;i=r.index();u=!0}if(v!=i&&u&&v<i){for(r=h.next();r.next().find(">a").hasClass("CSItemWithUserCategory");)r=r.next();h=r;i=r.index()}}else if(!h.hasClass("CSFixableCategory")&&h.find(">a").is(".CSCategory")&&v<i){for(h=h.next();h.next().find(">a").hasClass("CSItemWithUserCategory");)h=h.next();i=h.index()}v!=i?(h=$(n).find(">li:eq("+i+")"),h.addClass("WWPDragOver"+(v>i?"Up":"Down")),t.preventDefault()):h=null}}).on("drop",function(){var e=h.index(),l=y.find(">a").is(".CSCategory"),i=y.data("v"),u=!1,r,o,f,s,t;if(h.is(".CSFixableCategory")){if(u=h.is(".CSCategoryFixedR")&&v<e||!h.is(".CSCategoryFixedR")&&v>e,o=u?h.is(".CSCategoryFixedR")?"R":"L":null,v>e)for(h=h.next();h.is(".CSFixableCategory,.CSItemConfigFixedL");)h=h.next();else for(h=h.prev();h.is(".CSFixableCategory,.CSItemConfigFixedL");)h=h.prev();r=h.data("v")}else u=h.is(".CSItemConfigFixedL")||h.is(".CSItemConfigFixedR")||h.is(".CSItemFixedL")||h.is(".CSItemFixedR")||h.is(".CSCategoryFixedL")||h.is(".CSCategoryFixedR"),o=u?h.is(".CSItemConfigFixedL")||h.is(".CSItemFixedL")||h.is(".CSCategoryFixedL")?"L":"R":null,r=h.data("v");if(l){for(f=y,s=$();f.next().find(">a").hasClass("CSItemWithUserCategory");)f=f.next(),s=s.add(f);s.each(function(){i=$(this).data("v");var n=c.columnsSelectorGetObjectByValue(i);u?(n.F=o,n.fixedL=n.F=="L",n.fixedR=!n.fixedL,c.updateColumnsSelectorValuesIndex(i,r)):(n.F="",n.fixedL=!1,n.fixedR=!1,c.updateColumnsSelectorValuesIndex(i,r));v<e&&(r=i)})}else t=c.columnsSelectorGetObjectByValue(i),u?(t.F=o,t.fixedL=t.F=="L",t.fixedR=!t.fixedL,c.updateColumnsSelectorValuesIndex(i,r)):(t.F="",t.fixedL=!1,t.fixedR=!1,c.updateColumnsSelectorValuesIndex(i,r));c.loadColumnsSelectorValues(n,c.ColumnsSelectorData_Aux);$(c.m_filterInput).val()!=""&&c.updateColumnsSelectorList(n,$(c.m_filterInput).val())});$(this).on("dragend",function(){h!=null&&h.removeClass("WWPDragOverUp WWPDragOverDown");y.parent().find(">li").off("dragend dragover drop")})})}p=document.createElement("span");d=u;u=gx.getMessage(d);p.setAttribute("dsc",u);w&&l.setAttribute("sel","T");p.innerHTML=u;this.control.DropDownOptionsTitleSettingsIcons_IsFI?(k=document.createElement("i"),k.setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons[w?"muls":"mul"]),l.appendChild(k)):($(l).css("background-image","url("+gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons[w?"MultiselSelOption":"MultiselOption"])+")"),$(l).css("background-repeat","no-repeat"),$(l).css("background-position","5px 60%"));l.setAttribute("href",DDO_GetLocalURL());navigator.appVersion.toLowerCase().match("msie 8")||navigator.appVersion.toLowerCase().match("msie 7")||navigator.appVersion.toLowerCase().match("msie 9")||l.setAttribute("data-toggle","dropdown");$(l).on("click",function(t,i,r){return function(i){var o,e,f;if(r)if($(i.target).is("i:first-child"))for(var o=this.getAttribute("sel")=="T",s=$(this).parent().hasClass("CSFixableCategory"),u=$(this).parent().next();u.length==1&&(s&&!u.hasClass("CSFixableCategory")||!s&&u.find(">a").hasClass("CSItemWithUserCategory"));)u.is(".CSItemWithCategoryCollapsed,:visible")&&!u.find(">a").hasClass("CSCategory")&&u.find(">a")[0].getAttribute("sel")=="T"==o&&u.find(">a").click(),u=u.next();else{var u=$(this).parent().next(),h=$(this).parent().is(".CSCategoryCollapsed"),s=$(this).parent().hasClass("CSFixableCategory");for($(this).parent().toggleClass("CSCategoryCollapsed",!h);u.length==1&&(s&&!u.hasClass("CSFixableCategory")||!s&&u.find(">a").hasClass("CSItemWithUserCategory"));)u.toggleClass("CSItemWithCategoryCollapsed",!h),u=u.next();$(this).find(">i:last-child()")[0].setAttribute("class",c.control.DropDownOptionsTitleSettingsIcons[h?"tcol":"texp"])}else{if(o=this.getAttribute("sel")=="T",c.ColumnsSelectorData_Aux.Columns!=null&&c.ColumnsSelectorData_Aux.Columns.length>0){for(this.setAttribute("sel",o?"":"T"),f=0;f<c.ColumnsSelectorData_Aux.Columns.length;f+=1)if(c.ColumnsSelectorData_Aux.Columns[f].C==t){c.ColumnsSelectorData_Aux.Columns[f].V=!o;c.control.DropDownOptionsTitleSettingsIcons_IsFI?$(this).find("i")[0].setAttribute("class",c.control.DropDownOptionsTitleSettingsIcons[o?"mul":"muls"]):$(this).css("background-image","url("+gx.util.resolveUrl(c.control.DropDownOptionsTitleSettingsIcons[o?"MultiselOption":"MultiselSelOption"])+")");break}}else if(o){for(this.setAttribute("sel",""),e=-1,f=0;f<c.ColumnsSelectorData_Aux.VisibleColumns.length;f+=1)if(c.ColumnsSelectorData_Aux.VisibleColumns[f].ColumnName==t){e=f;break}e>=0&&(c.ColumnsSelectorData_Aux.VisibleColumns.splice(e,1),c.ColumnsSelectorData_Aux.InvisibleColumns.push({ColumnName:t}),c.control.DropDownOptionsTitleSettingsIcons_IsFI?$(this).find("i")[0].setAttribute("class",c.control.DropDownOptionsTitleSettingsIcons.mul):$(this).css("background-image","url("+gx.util.resolveUrl(c.control.DropDownOptionsTitleSettingsIcons.MultiselOption)+")"))}else{for(this.setAttribute("sel","T"),e=-1,f=0;f<c.ColumnsSelectorData_Aux.InvisibleColumns.length;f+=1)if(c.ColumnsSelectorData_Aux.InvisibleColumns[f].ColumnName==t){e=f;break}e>=0&&(c.ColumnsSelectorData_Aux.InvisibleColumns.splice(e,1),c.ColumnsSelectorData_Aux.VisibleColumns.push({ColumnName:t}),c.control.DropDownOptionsTitleSettingsIcons_IsFI?$(this).find("i")[0].setAttribute("class",c.control.DropDownOptionsTitleSettingsIcons.muls):$(this).css("background-image","url("+gx.util.resolveUrl(c.control.DropDownOptionsTitleSettingsIcons.MultiselSelOption)+")"))}$(this).hasClass("CSItemWithUserCategory")&&c.columnsSelector_updateCategoryValue($(this).parent().prev(),!0)}c.columnsSelector_updateFixableCategoriesValues(n)}}(r,u,o));$(l).on("click",function(n){n.preventDefault();n.stopPropagation()});l.appendChild(p);b!=null&&l.appendChild(b);a.appendChild(l);n.appendChild(a);w||o||!e||this.columnsSelector_updateCategoryValue($(a).prev())};this.columnsSelector_updateCategoryValue=function(n,t){while(n.find(">a").hasClass("CSItemWithUserCategory"))n=n.prev();for(var r=!0,i=n.next();i.length==1&&i.find(">a").hasClass("CSItemWithUserCategory");){if((!t||i.is(".CSItemWithCategoryCollapsed,:visible"))&&i.find(">a")[0].getAttribute("sel")!="T"){r=!1;break}i=i.next()}n.css("display","");n.find(">a")[0].setAttribute("sel",r?"T":"");this.control.DropDownOptionsTitleSettingsIcons_IsFI&&n.find(">a>i")[0].setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons[r?"muls":"mul"])};this.columnsSelector_updateFixableCategoriesValues=function(n,t){if($(n).hasClass("CSItemsFreezable")){for(var i=$(n.childNodes[0]),r=null,u=!0;i.length==1;)if(i.hasClass("CSFixableCategory"))r!=null&&(r.find(">a")[0].setAttribute("sel",u?"T":""),this.control.DropDownOptionsTitleSettingsIcons_IsFI&&r.find(">a>i")[0].setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons[u?"muls":"mul"])),r=i,i=i.next(),u=!0;else if((!t||i.is(".CSItemWithCategoryCollapsed,:visible"))&&i.find(">a")[0].getAttribute("sel")!="T")for(u=!1,i=i.next();i.length==1&&!i.hasClass("CSFixableCategory");)i=i.next();else i=i.next();r!=null&&(r.find(">a")[0].setAttribute("sel",u?"T":""),this.control.DropDownOptionsTitleSettingsIcons_IsFI&&r.find(">a>i")[0].setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons[u?"muls":"mul"]))}};this.IsValueEmpty=function(n){return n==""||this.IsDate()&&n.replace("/","").replace("/","").trim()==""||this.control.AllowMultipleSelection&&n=="[]"};this.minIndexForSelectedItemFirst=4;this.includeFirstSelectedItem=!1;this.reloadListFixedValuesOnDDOOpen=!1;this.LoadListFixedValues=function(n,t){var s,o,y,h,d,k,p,a,w,e,u,v,b,f,r;if(t?(s=n.childNodes[0],s.removeChild(s.childNodes[0])):(s=document.createElement("div"),s.className=this.control.AllowMultipleSelection?"FilterOptions FilterOptionsMultiSelection":"FilterOptions"),o=this.control.DataListFixedValues,o=WWP_replaceAll(o,"\\\\","[\\\\]"),o=WWP_replaceAll(o,"\\,","[\\\\\\]"),o.trim()==""&&(o="Error\\: Filter with Data List as 'Filter Values' must have a non empty Filter Value."),y=o.split(","),h=document.createElement("ul"),y.length>this.minIndexForSelectedItemFirst&&!this.control.AllowMultipleSelection){this.reloadListFixedValuesOnDDOOpen=!0;this.includeFirstSelectedItem=!0;var c=document.createElement("li"),i=document.createElement("a"),l=document.createElement("span");this.control.DropDownOptionsTitleSettingsIcons_IsFI?(f=document.createElement("i"),f.setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons.selo),i.appendChild(f)):($(i).css("background-image","url("+gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons.SelectedOption)+")"),$(i).css("background-repeat","no-repeat"),$(i).css("background-position","10px 60%"));$(c).css("display","none");i.setAttribute("href",DDO_GetLocalURL());navigator.appVersion.toLowerCase().match("msie 8")||navigator.appVersion.toLowerCase().match("msie 7")||navigator.appVersion.toLowerCase().match("msie 9")||i.setAttribute("data-toggle","dropdown");d=this;$(i).on("click",function(){return function(){d.SetActiveEventKey("<#Filter#>")}}(null));if(this.control.OnOptionClicked)$(i).on("click",this.control.OnOptionClicked);i.appendChild(l);c.appendChild(i);h.appendChild(c)}else(this.control.IncludeFilter||this.control.AllowMultipleSelection)&&(this.reloadListFixedValuesOnDDOOpen=!0);for(k=0,p=0;p<y.length;p+=1){a=y[p];a=WWP_replaceAll(a,"[\\\\\\]",",");a=WWP_replaceAll(a,"\\:","[\\\\\\]");w=a.split(":");e=w[0];e=WWP_replaceAll(e,"[\\\\\\]",":");e=WWP_replaceAll(e,"[\\\\]","\\");w.length>1?(u=w[1],u=WWP_replaceAll(u,"[\\\\\\]",":"),u=WWP_replaceAll(u,"[\\\\]","\\")):u=e;var c=document.createElement("li"),i=document.createElement("a"),l=document.createElement("span"),g=u;if(u=gx.getMessage(g),l.setAttribute("dsc",u),v=!1,this.control.AllowMultipleSelection){for(b=0;b<this.SelectedValue_getAUX.length;b+=1)if(this.SelectedValue_getAUX[b]==e){v=!0;break}}else v=e==this.control.SelectedValue.trim();v?(i.setAttribute("sel","T"),this.control.AllowMultipleSelection?l.innerHTML=u:(l.innerHTML="<strong>"+u+"<\/strong>",this.includeFirstSelectedItem||(this.control.DropDownOptionsTitleSettingsIcons_IsFI?(f=document.createElement("i"),f.setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons.selo),i.appendChild(f)):($(i).css("background-image","url("+gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons.SelectedOption)+")"),$(i).css("background-repeat","no-repeat"),$(i).css("background-position","10px 60%"))))):l.innerHTML=u;this.control.AllowMultipleSelection&&(v?this.control.DropDownOptionsTitleSettingsIcons_IsFI?(f=document.createElement("i"),f.setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons.muls),i.appendChild(f)):$(i).css("background-image","url("+gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons.MultiselSelOption)+")"):this.control.DropDownOptionsTitleSettingsIcons_IsFI?(f=document.createElement("i"),f.setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons.mul),i.appendChild(f)):$(i).css("background-image","url("+gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons.MultiselOption)+")"),$(i).css("background-repeat","no-repeat"),$(i).css("background-position","5px 60%"));i.setAttribute("href",DDO_GetLocalURL());navigator.appVersion.toLowerCase().match("msie 8")||navigator.appVersion.toLowerCase().match("msie 7")||navigator.appVersion.toLowerCase().match("msie 9")||i.setAttribute("data-toggle","dropdown");r=this;$(i).on("click",function(n,t){return function(){var i,u;if(r.control.AllowMultipleSelection)if(this.getAttribute("sel")=="T"){for(this.setAttribute("sel",""),i=-1,u=0;u<r.SelectedValue_getAUX.length;u+=1)if(r.SelectedValue_getAUX[u]==n){i=u;break}i>=0&&(r.SelectedValue_getAUX.splice(i,1),r.SelectedText_getAUX.splice(i,1));r.control.DropDownOptionsTitleSettingsIcons_IsFI?$(this).find("i")[0].setAttribute("class",r.control.DropDownOptionsTitleSettingsIcons.mul):$(this).css("background-image","url("+gx.util.resolveUrl(r.control.DropDownOptionsTitleSettingsIcons.MultiselOption)+")")}else this.setAttribute("sel","T"),r.SelectedValue_getAUX.push(n),r.SelectedText_getAUX.push(t),r.control.DropDownOptionsTitleSettingsIcons_IsFI?$(this).find("i")[0].setAttribute("class",r.control.DropDownOptionsTitleSettingsIcons.muls):$(this).css("background-image","url("+gx.util.resolveUrl(r.control.DropDownOptionsTitleSettingsIcons.MultiselSelOption)+")");else r.SetActiveEventKey("<#Filter#>"),r.SetSelectedValue(n),r.SetSelectedText(t),r.SetFilteredText(""),r.control.FilterIsRange&&r.SetFilteredTextTo("")}}(e,u));if(this.control.AllowMultipleSelection)$(i).on("click",function(n){n.preventDefault();n.stopPropagation()});else if(this.control.OnOptionClicked)$(i).on("click",this.control.OnOptionClicked);i.appendChild(l);c.appendChild(i);v&&this.control.AllowMultipleSelection&&y.length>this.minIndexForSelectedItemFirst?(h.insertBefore(c,h.childNodes[k]),k++):h.appendChild(c)}this.control.IncludeFilter&&this.items_AddNoResultsFound(h);s.appendChild(h);t||n.appendChild(s)};this.LoadFixedFilters=function(n){var v=document.createElement("div"),e,y,l,h,o,s,u,i,f,a,p,t,w,c,k,b,r;for(v.className="FilterOptions",e=this.control.FixedFilters,e=WWP_replaceAll(e,"\\\\","[\\\\]"),e=WWP_replaceAll(e,"\\,","[\\\\\\]"),y=e.split(","),l=document.createElement("ul"),h=0;h<y.length;h+=1){if(o=y[h],o=WWP_replaceAll(o,"[\\\\\\]",","),o=WWP_replaceAll(o,"\\:","[\\\\\\]"),s=o.split(":"),u=s[0],u=WWP_replaceAll(u,"[\\\\\\]",":"),u=WWP_replaceAll(u,"[\\\\]","\\"),s.length>1?(i=s[1],i=WWP_replaceAll(i,"[\\\\\\]",":"),i=WWP_replaceAll(i,"[\\\\]","\\"),s.length>2&&(f=s[2],f=WWP_replaceAll(f,"[\\\\\\]",":"),f=WWP_replaceAll(f,"[\\\\]","\\"))):i=u,u=="CFS"&&h>0){a=document.createElement("li");a.className="divider";$(a).on("click",function(n){n.preventDefault();n.stopPropagation()});l.appendChild(a)}p=document.createElement("li");t=document.createElement("a");f!=null&&(w=document.createElement("i"),w.setAttribute("class",f+" CSDropDownFilter"),t.appendChild(w));c=document.createElement("span");i=gx.getMessage(i);c.setAttribute("dsc",i);k=u==this.control.SelectedFixedFilter.trim();k?(t.setAttribute("sel","T"),c.innerHTML="<strong>"+i+"<\/strong>",f!=null||this.includeFirstSelectedItem||(this.control.DropDownOptionsTitleSettingsIcons_IsFI?(b=document.createElement("i"),b.setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons.selo),t.appendChild(b)):($(t).css("background-image","url("+gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons.SelectedOption)+")"),$(t).css("background-repeat","no-repeat"),$(t).css("background-position","10px 60%")))):c.innerHTML=i;t.setAttribute("href",DDO_GetLocalURL());navigator.appVersion.toLowerCase().match("msie 8")||navigator.appVersion.toLowerCase().match("msie 7")||navigator.appVersion.toLowerCase().match("msie 9")||t.setAttribute("data-toggle","dropdown");r=this;$(t).on("click",function(n){return function(){r.control.SelectedFixedFilter=n;r.control.IsM?r.SetActiveEventKeyFixedFilter_M():r.SetActiveEventKey("<#FixedFilter:"+n+"#>");r.SetSelectedValue("");r.SetSelectedText("");r.SetFilteredText("");r.control.FilterIsRange&&r.SetFilteredTextTo("")}}(u,i));$(t).on("click",this.control.OnOptionClicked);t.appendChild(c);p.appendChild(t);l.appendChild(p)}v.appendChild(l);n.appendChild(v)};this.OnDDOClosing=function(){return $(".calendar:visible,.daterangepicker:visible").length>0?!1:this.calendarOpened?(this.calendarOpened=!1,!1):(this.auxVarsAttachedFunct!=null&&(gx.fx.obs.deleteObserver("gx.onbeforeevent",this,this.auxVarsAttachedFunct),delete this.auxVarsAttachedFunct),this.control.FilterIsRangePicker?this.DetachAuxDateVariable(this.GetRangePickerFilterVariable()):(this.DetachAuxDateVariable(this.GetDateFilterVariable()+"_dp_container"),this.control.FilterIsRange&&this.DetachAuxDateVariable(this.GetDateFilterVariableTo()+"_dp_container")),!0)};this.OnDDOClosingRemoveError=function(){var n=$("#"+this.containerToDrawName).find(">.Errorbtn, >.ErrorAttribute");return n.length==1&&n.attr("data-gx-unprefixed-class")!=""&&n.next().prop("tagName")=="DIV"&&(n.attr("class",n.attr("data-gx-unprefixed-class")),n.next().remove()),!0};this.AttachAuxDateVariable=function(n,t,i,r,u){var o=$("#"+t+"_dp_container").detach(),f,e;if(o.appendTo("#"+i),f=$("#"+t).get(0),$(f).prop("class","form-control AttributeDate").val(r),this.HasWWPDatePicker=typeof WWP_DatePicker_UC_on_Changed!="undefined",this.applyDateFocusHack=!0,this.HasWWPDatePicker){this.DateVar_CalShownHandler==null&&(e=this,this.DateVar_CalShownHandler=function(){e.calendarOpened=!0});$(".daterangepicker button").off("click",this.DateVar_CalShownHandler).on("click",this.DateVar_CalShownHandler);$(f).off("outsideClick.daterangepicker",this.DateVar_CalShownHandler).on("outsideClick.daterangepicker",this.DateVar_CalShownHandler)}else{$(f).off("click").on("click",function(n){$(this).get(0).selectionStart=0;$(this).get(0).selectionEnd=0;$(this).select();n.preventDefault();n.stopPropagation()});$(f).keydown(function(n){if(n.keyCode==13){n.preventDefault();n.stopPropagation();var t=document.getElementById(u);$(t).click();$(t).focus()}});$("#"+t+"_dp_trigger").off("click").on("click",function(n){return function(){$(".calendar").css("z-index","1001");n.calendarOpened=!0}}(this))}return $(f).blur(),f};this.AttachAuxRangePickerVariable=function(n,t,i,r,u,f){var h=$("#"+t).detach(),e,o,s;h.appendTo("#"+i);e=$("#"+t).get(0);o=$(e).data("daterangepicker");this.control.Format=="4Y"&&o.forceDate4Y();r!=""&&u!=""?($(e).val(r+" - "+u),o.elementChanged()):(o.setStartDate(new Date),o.setEndDate(new Date),o.isNullVal=!0,$(e).val(""));s=this;this.DateVar_CalShownHandler==null&&(this.DateVar_CalShownHandler=function(){s.calendarOpened=!0});$(e).attr("placeholder",gx.getMessage(wwp.labels.RangePickerInviteMessage)).off("outsideClick.daterangepicker",this.DateVar_CalShownHandler).on("outsideClick.daterangepicker",this.DateVar_CalShownHandler);$(".daterangepicker button").off("click",this.DateVar_CalShownHandler).on("click",this.DateVar_CalShownHandler);$(e).off("click").on("click",function(n){$(this).get(0).selectionStart=0;$(this).get(0).selectionEnd=0;$(this).select();n.preventDefault();n.stopPropagation();var t=$(s.m_filterInput).data("daterangepicker");t!=null&&t.show(n)});return $(e).keydown(function(n){if(n.keyCode==13){n.preventDefault();n.stopPropagation();var t=document.getElementById(f);$(t).click();$(t).focus()}}),e};this.CreateFilterInput=function(n,t,i,r,u,f,e,o){i.className="form-control Attribute";i.setAttribute("type","text");i.setAttribute("maxlength","40");f&&i.setAttribute("style","width: 125px;padding-right: 0px;height: 28px;float: right;");this.control.DataListType!=null&&this.control.DataListType.indexOf("Dynamic")==0&&i.setAttribute("value",n==undefined?"":n);$(i).on("click",function(n){n.preventDefault();n.stopPropagation()});if($(i).keydown(function(n){if(n.keyCode==13&&(n.preventDefault(),n.stopPropagation(),e!=null&&e!="")){var t=document.getElementById(e);$(t).click();document.getElementById(o).focus()}}),this.control.IncludeDataList||this.control.DropDownOptionsType=="GridColumnsSelector"||this.control.DropDownOptionsType=="ExtendedComboBox"||this.control.DropDownOptionsType=="ExtendedSuggest")$(i).on("input",function(n){return function(){n.myT!=null&&clearInterval(n.myT);n.myT=setInterval(function(){clearInterval(n.myT);n.control.DropDownOptionsType=="GridColumnsSelector"?n.updateColumnsSelectorList(t.childNodes[0].childNodes[0],$(i).val()):n.control.DropDownOptionsType=="ExtendedComboBox"||n.control.DropDownOptionsType=="ExtendedSuggest"?n.updateExtendedComboList(t.childNodes[0].childNodes[0],$(i).val()):n.control.DataListType=="Dynamic"?n.updateFilterList(t,r,u,!0):n.control.DataListType=="Dynamic (with fixedValues)"?(n.procResult==null&&n.updateFilterList(t,null,null,!0),n.ProcessProcResult(n.procResult,t,null,null,$(r).val(),!0)):n.control.FilterIsRange||n.updateFixedValuesList(t,i)},300)}}(this));if(this.TF_IsNumericFilter()){var s=this.control.Format,l=!1,c=null,h=0;s!=null&&(s[0]==="-"&&(l=!0,s=s.substring(1)),s.indexOf(".")>0&&(c=parseInt(s.substring(0,s.indexOf("."))),h=parseInt(s.substring(s.indexOf(".")+1)),i.setAttribute("maxlength",c),h=parseInt(s.substring(s.indexOf(".")+1)),c=h!=0||l?c-h-(h>0?1:0)-(l?1:0):null));$(i).keypress(function(n){var t=h>0&&this.value.indexOf(gx.decimalPoint)==-1,i;return n.which!=8&&n.which!=0&&(n.which<48||n.which>57)&&(!t||n.key!=gx.decimalPoint)&&(!l||n.which!=45||this.selectionStart>0)?!1:c!=null&&n.which>=48&&n.which<=57&&(h==0||t||this.selectionStart<=this.value.indexOf(gx.decimalPoint))&&(i=(h>0&&!t?this.value.indexOf(gx.decimalPoint):this.value.length)-(l&&this.value[0]=="-"?1:0),i>=c)?!1:void 0})}};this.updateFixedValuesList=function(n,t){var i=$(t).val();this.updateFixedValuesList2(n,i)};this.updateFixedValuesList2=function(n,t){var f=n.childNodes[0].childNodes[0],c=0,p="",w=!1,e=0,l,b,o,h,a,u,v,y;for(this.includeFirstSelectedItem&&(e+=1),l=f.childNodes.length,b=this.control.DataListType.indexOf("Dynamic")==0,this.control.IncludeFilter&&(l-=1);e<l;e+=1){var s=f.childNodes[e].childNodes[0],i=$(s).find("span")[0],r=i.getAttribute("dsc");t!=null&&t.length>0?(o=WWP_removeAccents(r.toLowerCase()).indexOf(WWP_removeAccents(t.toLowerCase())),o>=0?(r=r.substring(0,o)+"<strong>"+r.substring(o,o+t.length)+"<\/strong>"+r.substring(o+t.length),u=i.getAttribute("dscSuffix"),i.innerHTML=u!=null?r+u:r,$(i.parentNode.parentNode).css("display",""),c++):$(i.parentNode.parentNode).css("display","none")):(h=s.getAttribute("sel")=="T",this.control.AllowMultipleSelection?($(i.parentNode.parentNode).css("display",""),u=i.getAttribute("dscSuffix"),i.innerHTML=u!=null?r+u:r,this.control.DropDownOptionsTitleSettingsIcons_IsFI?$(s).find("i")[0].setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons[h?"muls":"mul"]):$(s).css("background-image","url("+gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons[h?"MultiselSelOption":"MultiselOption"])+")")):h?(i.innerHTML="<strong>"+r+"<\/strong>",this.control.DropDownOptionsTitleSettingsIcons_IsFI?$(i.parentNode).find("i").length>0?$(i.parentNode).find("i")[0].setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons.selo):(a=document.createElement("i"),a.setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons.selo),i.parentNode.insertBefore(a,i.parentNode.childNodes[0])):($(i.parentNode).css("background-image","url("+gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons.SelectedOption)+")"),$(i.parentNode).css("background-repeat","no-repeat"),$(i.parentNode).css("background-position","10px 60%")),e-1>=this.minIndexForSelectedItemFirst?($(i.parentNode.parentNode).css("display","none"),w=!0,p=i.innerHTML):$(i.parentNode.parentNode).css("display","")):(u=i.getAttribute("dscSuffix"),i.innerHTML=u!=null?r+u:r,$(i.parentNode.parentNode).css("display",""),e-1>=this.minIndexForSelectedItemFirst&&(this.control.DropDownOptionsTitleSettingsIcons_IsFI?$(i.parentNode).find("i").remove():($(i.parentNode).css("background-image",""),$(i.parentNode).css("background-repeat",""),$(i.parentNode).css("background-position","")))),c++)}w?(v=f.childNodes[0],$(v).css("display",""),$(v).find("span")[0].innerHTML=p):this.includeFirstSelectedItem&&$(f.childNodes[0]).css("display","none");this.control.IncludeFilter&&(y=f.childNodes[f.childNodes.length-1],c==0?$(y).css("display",""):$(y).css("display","none"))};this.getAjaxCallRestURL=function(){return WWP_getAjaxCallRestURL(this.control.DataListProc)};this.getDataListProcParametersPrefix=function(){for(var i=this.control.DataListProcParametersPrefix,r;i.indexOf("#")>0;){var f=i.indexOf("#"),u=i.substring(f+1,f+1+i.substring(f+1).indexOf("#")),t=null,n=$("#"+u);this.control.IsGridItem&&n.length==0?(n=$("#"+u+this.realId.substring(this.realId.length-5)),n.length==1?t=n.val():(n=$("#span_"+u+this.realId.substring(this.realId.length-5)),n.length==1&&(t=n.text().trim()))):t=n.val();t==null?(n=$("#"+u.toUpperCase()+"Container.ExtendedCombo"),n.length==1?(r=n.data("wwpUC"),t=r!=null&&r.control!=null&&r.control.SelectedValue!=null&&r.control.SelectedValue!=""?WWP_replaceAll(r.control.SelectedValue,"\n",""):"[]"):t==null&&(t="0")):t=t==""&&n.length==1&&n.attr("type")=="number"?"0":WWP_escapeForJson(t);i=i.replace("#"+u+"#",t)}return i};this.updateExtendedComboList=function(n,t,i){var f,r,e,u;if(this.control.DataListProc!=null&&this.control.DataListProc!="")if(f=0,i?(f=parseInt($(n).attr("wwp-current-page")),f++):n.innerHTML="",t.length>=this.control.DataListUpdateMinimumCharacters){i||$(this.m_loadingLi).css("display","");r=this;e=this.getAjaxCallRestURL();this.lastAjaxPrefix=this.getDataListProcParametersPrefix();var s=this.autocomplete,u=this.lastAjaxPrefix+', "SearchTxt'+(wwp.settings.columnsSelector.InfiniteScrolling?"Parms":"")+'": "'+(wwp.settings.columnsSelector.InfiniteScrolling?(f<10?"0":"")+f:"")+WWP_escapeForJson(t)+'"',o=!1;this.control.RemoteServicesParameters!=null&&this.control.RemoteServicesParameters!=""?(o=!0,u=WWP_getRPCBody(this.control.RemoteServicesParameters,u)):u="{"+u+"}";this.ajaxCall!=null&&this.ajaxCall.abort();this.ajaxCall=$.ajax({"async":!0,type:"POST",url:e,headers:{Authorization:this.control.GAMOAuthToken},contentType:"application/json",data:u,success:function(u){var c,e,v,h,l,a,y;o&&(u=JSON.parse(u.result));c=JSON.parse(u.Combo_DataJson);$(r.m_loadingLi).css("display","none");e=-1;i?(v=$(n.childNodes[n.childNodes.length-1]).find(document.activeElement).length>0,v&&n.childNodes.length>1&&(e=n.childNodes.length-1),$(n.childNodes[n.childNodes.length-1]).remove(),$(n).attr("wwp-current-page",f)):(wwp.settings.columnsSelector.InfiniteScrolling&&$(n).attr("wwp-current-page",0),n.innerHTML="");r.control.IsGridItem&&(r.control.SelectedValue=r.getGridItemSelectedValue(),r.control.SelectedText=r.realSelectedText!=null?r.realSelectedText:"");h=r.updateExtendedComboList_HasMoreToFetch(c);$(n).attr("wwp-fetch-more",h?"":null);i||(h&&r.control.DropDownOptionsType=="ExtendedSuggest"?$(n).attr("fetching-search-txt",$(r.m_inputSuggest).val()):$(n).attr("fetching-search-txt",null));r.loadExtendedComboBoxItems(n,c,0,null,t.length>0&&!i,!1,i,h);l=null;(c!=null&&c.length>0||r.control.IncludeAddNewOption)&&(r.autocomplete=r.autocomplete||s,h?(l=document.createElement("li"),r.addLoadingOption(l),n.appendChild(l)):r.autocomplete&&r.extendedSuggest_Autocomplete(n));e!=-1&&(e>0&&n.childNodes.length<=e&&(e=n.childNodes.length-1),$(n.childNodes[e]).find(">a").focus());r.control.IsGridItem?($("#"+r.containerToDrawName).hasClass("dropup")&&WWP_dropdownAutoPosition("#"+r.containerToDrawName,r.m_UlDropDown,r.m_triggerButton),r.setSectionGridMinHeight(!0)):r.shiftPageFooter(!0);r.autoClose?$(r.m_triggerButton).click():(a=!1,h&&$(r.m_triggerButton.parentElement).hasClass("open")&&(r.ExtendedComboBox_FilterSelected?(y=r.control.SelectedValue!=null&&r.control.SelectedValue!=""?JSON.parse(r.control.SelectedValue):[],$(n).find("li a[sel=T]:not(.ExtendedComboLevelWithChildren)").length<y.length?a=!0:($(n).attr("wwp-fetch-more",null),i||$(n).attr("fetching-search-txt",null),$(l).css("display","none"))):$(n).find("li>.ExtendedComboLevel1").length>0&&(a=!0)),r.extendedComboBox_UpdateSelectAll_A(null),r.extendedComboBox_UpdateNodeWithChildrenSelection(),a&&$(n).parent().scroll())},error:function(n,t,i){console.log("jqXHR status "+n.status);console.log("textStatus "+t);console.log("errorThrown "+i);n!=null&&n.status==401&&window.location.reload()}})}else u=[],this.loadExtendedComboBoxItems(n,u,0,null,!1),this.extendedComboBox_UpdateSelectAll_A(null);else this.updateExtendedComboList2(n,t)};this.updateExtendedComboList_HasMoreToFetch=function(n){var i,t;if(wwp.settings.columnsSelector.InfiniteScrolling&&n!=null){if(n.length==wwp.settings.columnsSelector.InfiniteScrollingPage)return!0;if(n.length>0&&n[0].C!=null&&n[0].C.length>0){for(i=0,t=0;t<n.length;t++)i+=n[t].C.length;return i==wwp.settings.columnsSelector.InfiniteScrollingPage}}return!1};this.updateExtendedComboList2=function(n,t){for(var c=0,p=n.childNodes.length,l=this.ExtendedComboBox_FilterSelected,u=-1,y=!1,o,i,e,h,v;c<p;c+=1){o=n.childNodes[c];i=o.childNodes[0];i.removeAttribute("filtered");i.removeAttribute("filteredChildren");var a=$(i).find("span.OptionLabel")[0],r=i.getAttribute("dsc"),f,s=t!=null&&t.length>0;f=!1;s?(e=WWP_removeAccents(r.toLowerCase()).indexOf(WWP_removeAccents(t.toLowerCase())),i.hasAttribute("add-new-option")?(r=encodeHtmlEntities(r),f=!0):e>=0&&(!l||i.getAttribute("sel")=="T")?(r=encodeHtmlEntities(r.substring(0,e))+"<strong>"+encodeHtmlEntities(r.substring(e,e+t.length))+"<\/strong>"+encodeHtmlEntities(r.substring(e+t.length)),f=!0,this.control.CategoryFilteredBehaviour=="ShowAllChildren"&&(h=parseInt(i.getAttribute("level")),(u==-1||u>h)&&(u=h))):this.control.CategoryFilteredBehaviour=="ShowAllChildren"&&u!=-1&&(h=parseInt(i.getAttribute("level")),u<h?(f=!0,r=encodeHtmlEntities(r)):u=-1)):l&&i.getAttribute("sel")!="T"||o.getAttribute("noData")!=null||(f=!0,r=encodeHtmlEntities(r));f?(y=!0,$(o).css("display",""),i.getAttribute("expanded")!=null&&(this.control.DropDownOptionsTitleSettingsIcons_IsFI?(v=$(i).find("i"),v[v.length-1].setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons[s?"texp":"tcol"])):$(i.childNodes[i.childNodes.length-1]).css("background-image","url("+gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons[s?"TreeviewExpand":"TreeviewCollapse"])+")"),i.setAttribute("expanded",s?"false":"true")),(s||l)&&(i.setAttribute("filtered","true"),this.updateExtendedComboList_ShowParent(n,i,c))):$(o).css("display","none");a!=null&&(r==""&&this.control.AllowMultipleSelection?a.innerText=gx.getMessage("WWP_MultipleSelectionEmptyItem"):a.innerHTML=r)}y||this.control.DropDownOptionsType!="ExtendedSuggest"||this.control.DataListProc!=null&&this.control.DataListProc!=""||$(n).find(">li[noData]").css("display","");this.control.AllowMultipleSelection&&(this.extendedComboBox_UpdateSelectAll_A(null),this.extendedComboBox_UpdateNodeWithChildrenSelection());this.autocomplete&&this.extendedSuggest_Autocomplete(n)};this.extendedSuggest_Autocomplete=function(n){var r,t,i,u;this.autocomplete=!1;r=$(this.m_triggerButton.parentElement).hasClass("open")?$(n).find(">li:visible"):$(n).find(">li:not([style*=display])");t=$(this.m_inputSuggest);r.length>=1+(this.control.IncludeAddNewOption?1:0)&&(i=r.first().find(">a").attr("dsc"),this.hasHTMLTemplate()&&(i=this.extendedComboCaption_GetHTMLUsingTemplate(i,!0)),(i.toLowerCase()==t.val().toLowerCase()||r.length==1+(this.control.IncludeAddNewOption?1:0)&&i.toLowerCase().indexOf(t.val().toLowerCase())==0)&&(u=t.val().length,r.first().addClass("current"),t.val(i),t[0].setSelectionRange(u,t.val().length)))};this.updateExtendedComboList_ShowParent=function(n,t,i){var f,u,r,e;if(t.getAttribute("level")!="0")for(f=parseInt(t.getAttribute("level"))-1,u=i-1;u>=0;u-=1)if(r=n.childNodes[u].childNodes[0],parseInt(r.getAttribute("level"))==f)if(r.setAttribute("filteredChildren","true"),this.control.DropDownOptionsTitleSettingsIcons_IsFI?(e=$(r).find("i"),e[e.length-1].setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons.tcol)):$(r.childNodes[r.childNodes.length-1]).css("background-image","url("+gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons.TreeviewCollapse)+")"),r.setAttribute("expanded","true"),$(r.parentNode).css("display")=="none")$(r.parentNode).css("display",""),r.setAttribute("filtered","true"),f--;else break};this.updateColumnsSelectorList=function(n,t){for(var h=0,o=0,c=n.childNodes.length,f,s,e;o<c;o+=1){var i=n.childNodes[o].childNodes[0],u=$(i).find("span")[0],r=u.getAttribute("dsc");$(i).hasClass("CSCategory")||$(i).parent().hasClass("CSFixableCategory")?($(i).parent().removeClass("CSCategoryCollapsed"),$(i).find(">i:last-child()")[0].setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons.tcol),$(i).parent().css("display",$(i).parent().hasClass("CSFixableCategory")?"":"none")):($(i).parent().removeClass("CSItemWithCategoryCollapsed"),t!=null&&t.length>0?(f=WWP_removeAccents(r.toLowerCase()).indexOf(WWP_removeAccents(t.toLowerCase())),f>=0?(r=r.substring(0,f)+"<strong>"+r.substring(f,f+t.length)+"<\/strong>"+r.substring(f+t.length),e=u.getAttribute("dscSuffix"),u.innerHTML=e!=null?r+e:r,$(u.parentNode.parentNode).css("display",""),$(i).hasClass("CSItemWithUserCategory")&&this.columnsSelector_updateCategoryValue($(i).parent().prev(),!0),h++):$(i).parent().css("display","none")):(s=i.getAttribute("sel")=="T",$(i).parent().css("display",""),e=u.getAttribute("dscSuffix"),u.innerHTML=e!=null?r+e:r,this.control.DropDownOptionsTitleSettingsIcons_IsFI?$(i).find("i")[0].setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons[s?"muls":"mul"]):$(i).css("background-image","url("+gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons[s?"MultiselSelOption":"MultiselOption"])+")"),$(i).hasClass("CSItemWithUserCategory")&&this.columnsSelector_updateCategoryValue($(i).parent().prev(),!0),h++))}this.columnsSelector_updateFixableCategoriesValues(n,!0)};this.DetachAuxDateVariable=function(n){var t=$("#"+n).detach();t.appendTo("#"+this.GetWebComponentPrefix()+(this.control.IsM?"DDO_"+this.control.MName:this.control.ControlName).toUpperCase()+"AUXDATES")};this.GetRangePickerFilterVariable=function(){return(this.dateFilterVarName==null||this.dateFilterVarName=="")&&(this.dateFilterVarName=this.GetWebComponentPrefix()+"v"+(this.control.IsM?"DDO_"+this.control.MName:this.control.ControlName).toUpperCase()+"AUXDATETEXT"),this.dateFilterVarName};this.GetDateFilterVariable=function(){return(this.dateFilterVarName==null||this.dateFilterVarName=="")&&(this.dateFilterVarName=this.GetWebComponentPrefix()+"v"+(this.control.IsM?"DDO_"+this.control.MName:this.control.ControlName).toUpperCase()+"AUXDATE"),this.dateFilterVarName};this.GetWebComponentPrefix=function(){return WWP_getCurrentWCId(this.control.IsM?this.control.MControl:this.control)};this.GetDateFilterVariableTo=function(){return this.GetDateFilterVariable()+"TO"};this.ajaxCall2;this.ajaxCall;this.procResult;this.updateFilterList=function(n,t,i,r,u){var s=this.getSearchTxtForTFAjaxCall(!1,null,t,i),f,e,h,o,c;s.updateList?(f=0,u?(f=parseInt($(n).attr("wwp-current-page")),f++):this.addLoadingOption(n),this.control.TitleControlAlign=="Left"&&$(n).parent().css("margin-left","-"+($(n).parent().outerWidth()-$($(n).parent().parent().children()[0]).outerWidth())+"px"),e='"DDOName": "'+(this.control.IsM?"DDO_"+this.control.MName:this.control.ControlName)+'", "SearchTxt'+(wwp.settings.columnsSelector.InfiniteScrolling?"Parms":"")+'": "'+(wwp.settings.columnsSelector.InfiniteScrolling?(f<10?"0":"")+f:"")+s.searchTxt+'", "SearchTxtTo": "'+s.searchTxtTo+'"',h=!1,this.control.RemoteServicesParameters!=null&&this.control.RemoteServicesParameters!=""?(h=!0,e=WWP_getRPCBody(this.control.RemoteServicesParameters,e)):e="{"+e+"}",o=this,c=this.getAjaxCallRestURL(),this.ajaxCall=$.ajax({"async":!0,type:"POST",url:c,headers:{Authorization:this.control.GAMOAuthToken},contentType:"application/json",data:e,success:function(e){h&&(e=JSON.parse(e.result));e.Options=JSON.parse(e.OptionsJson);e.OptionsDesc=JSON.parse(e.OptionsDescJson);e.OptionIndexes=JSON.parse(e.OptionIndexesJson);o.control.DataListType=="Dynamic (with fixedValues)"&&(o.procResult=e);u?$(n).attr("wwp-current-page",f):wwp.settings.columnsSelector.InfiniteScrolling&&$(n).attr("wwp-current-page",0);var c=!1;wwp.settings.columnsSelector.InfiniteScrolling&&e.Options!=null&&e.Options.length==wwp.settings.columnsSelector.InfiniteScrollingPage&&(c=!0);$(n).attr("wwp-fetch-more",c?"":null);o.ProcessProcResult(e,n,t,i,s.originalSearchTxt,r,u,c);o.setSectionGridMinHeight(!0)},error:function(n,t,i){console.log("jqXHR statusCode"+n.statusCode());console.log("textStatus "+t);console.log("errorThrown "+i);n!=null&&n.status==401&&window.location.reload()}})):n.innerHTML=""};this.addLoadingOption=function(n){var t,r,i;n.innerHTML="";t=document.createElement("a");r=document.createElement("span");r.innerHTML=gx.getMessage(this.control.LoadingData);$(t).on("click",function(n){n.preventDefault();n.stopPropagation()});t.setAttribute("href",DDO_GetLocalURL());navigator.appVersion.toLowerCase().match("msie 8")||navigator.appVersion.toLowerCase().match("msie 7")||navigator.appVersion.toLowerCase().match("msie 9")||t.setAttribute("data-toggle","dropdown");t.className="image";this.control.DropDownOptionsTitleSettingsIcons_IsFI?(i=document.createElement("i"),i.setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons.fildata),t.appendChild(i)):(i=document.createElement("img"),i.setAttribute("src",gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons.OptionFilteringData)),t.appendChild(i));t.appendChild(r);$(n).attr("loading-option","");n.appendChild(t)};this.setSectionGridMinHeight=function(n){for(var r,i,f=$("#"+this.containerToDrawName),u=f[0].children[f[0].children.length-1],t=u.parentElement,e=0;e<18;e++)if(t!=null&&($(t).is("table.table-responsive")||$(t).css("overflow")!="auto"&&$(t).css("overflow-x")!="auto"))t=t.parentElement;else break;($(t).css("overflow")=="auto"||$(t).css("overflow-x")=="auto")&&(n?(f.hasClass("dropup")||(r=$(u).offset().top+$(u).outerHeight()+12-$(t).offset().top,$(t).css({"min-height":r+"px"}),hasScroll($(t),!1)&&(r+=getScrollBarWidth(!1),$(t).css({"min-height":r+"px"})),t.tagName=="TABLE"&&$(t).height()<r&&($(t).css({"margin-bottom":r-$(t).height()+"px"}),$(t).data("bottomSet","T"))),i=$(u).closest("th"),i.data("zIndexIncresed")==null&&parseInt(i.css("z-index"))>0&&(i.css("z-index",parseInt(i.css("z-index"))+100),i.data("zIndexIncresed","T"))):($(t).css({"min-height":""}),i=$(u).closest("th"),i.data("zIndexIncresed")=="T"&&(i.css("z-index",parseInt(i.css("z-index"))-100),i.data("zIndexIncresed",null)),$(t).data("bottomSet")=="T"&&($(t).css({"margin-bottom":""}),$(t).data("bottomSet",null))));f.closest("th.WWPDraggable").draggable=!n};this.shiftPageFooter=function(n){var r=$("#"+this.containerToDrawName),i,t,u;r.hasClass("dropup")||(i=r[0].children[r[0].children.length-1],t=$(i).closest(".CellTableContentWithFooter"),t.length==1&&(t.parent().css("margin-bottom",""),n&&(u=$(i).offset().top+$(i).height()-(t.offset().top+t.height()),u>0&&t.parent().css("margin-bottom",u+5+"px"))))};this.getSearchTxtForTFAjaxCall=function(n,t,i,r){var e="",u="",o="",f=!0;return this.control.DataListType!="Dynamic (with fixedValues)"&&this.control.IncludeFilter&&(i!=null?(e=n?t:$(i).val(),u=e,this.control.FilterType=="Character"&&u.length<this.control.DataListUpdateMinimumCharacters&&(f=!1),u=WWP_escapeForJson(u)):(u="",this.control.FilterType=="Character"&&this.control.DataListUpdateMinimumCharacters>0&&(f=!1)),this.control.FilterIsRange&&(o=n?t:$(r).val(),!f&&o.length>=this.control.DataListUpdateMinimumCharacters&&(f=!0),u=WWP_escapeForJson(u))),{originalSearchTxt:e,searchTxt:u,searchTxtTo:o,updateList:f}};this.getOptionCount=function(n,t,i,r){var u,f,e;this.getOptionCountResult=0;try{u=this.getSearchTxtForTFAjaxCall(!0,n,i,r);u.updateList?(f=this,e=this.getAjaxCallRestURL(),this.ajaxCall2=$.ajax({"async":!1,type:"POST",url:e,headers:{Authorization:this.control.GAMOAuthToken},contentType:"application/json",data:'{"DDOName": "'+(this.control.IsM?"DDO_"+this.control.MName:this.control.ControlName)+'", "SearchTxt'+(wwp.settings.columnsSelector.InfiniteScrolling?"Parms":"")+'": "'+(wwp.settings.columnsSelector.InfiniteScrolling?"00":"")+u.searchTxt+'", "SearchTxtTo": "'+u.searchTxtTo+'"}',success:function(t){for(var r=JSON.parse(t.OptionsJson),u=JSON.parse(t.OptionIndexesJson),i=0;i<r.length;i+=1)if(r[i]==n){f.getOptionCountResult=u[i];return}},error:function(n,t,i){console.log("jqXHR statusCode"+n.statusCode());console.log("textStatus "+t);console.log("errorThrown "+i);n!=null&&n.status==401&&window.location.reload()}})):t.innerHTML=""}catch(o){}return this.getOptionCountResult};this.ProcessProcResult=function(n,t,i,r,u,f,e,o){var w,a,tt,s,et,it,b,v,h,ft,ot,g,st,ht,ct,c;f&&u==""&&(f=!1);w=document.createElement("div");w.className="FilterOptions";a=document.createElement("ul");e&&(a=$(t).find(">div>ul")[0]);var k=!1,nt=!this.IsValueEmpty(this.control.SelectedValue),p,rt;if(this.control.AllowMultipleSelection&&(w.className="FilterOptions FilterOptionsMultiSelection",p=this.SelectedValue_getAUX.slice(0),rt=this.SelectedValue_getAUX.length==this.SelectedText_getAUX.length?this.SelectedText_getAUX.slice(0):this.SelectedValue_getAUX.slice(0)),nt&&!f&&!e&&n.Options!=null&&n.Options.length>0)if(this.control.AllowMultipleSelection){for(nt=p.length>0,v=0;v<p.length;v+=1){for(k=!1,s=0;s<n.Options.length;s+=1)if(n.Options[s]==p[v]||n.Options[s]=="<#Empty#>"&&p[v]==""){k=!0;break}k&&(p.splice(v,1),rt.splice(v,1),v--)}k=p.length==0}else for(s=0;s<n.Options.length;s+=1)if(n.Options[s]==this.control.SelectedValue){k=!0;break}if(n.Options==null&&(n.Options=[]),e&&$(a.childNodes[a.childNodes.length-1]).remove(),tt=0,n.Options!=null&&n.Options.length>0||nt&&!k&&!f){for((n.OptionsDesc==null||n.OptionsDesc.length==0)&&(n.OptionsDesc=n.Options),s=0,!nt||k||f||e||(s=this.control.AllowMultipleSelection?p.length*-1:-1,tt=s),et=0;s<n.Options.length;s+=1){tt+=1;var ut=document.createElement("li"),l=document.createElement("a"),lt=document.createElement("span"),y,d;if(s<0)this.control.AllowMultipleSelection?(y=p[0],d=rt[0],p.splice(0,1),rt.splice(0,1)):(y=this.control.SelectedValue,d=this.control.SelectedText!=null&&this.control.SelectedText!=""?this.control.SelectedText:y,y=="<#Empty#>"&&(d=gx.getMessage("WWP_TitleFilter_EmptyOption")));else if(y=n.Options[s],d=n.OptionsDesc[s].trim(),y=="<#Empty#>")d=gx.getMessage("WWP_TitleFilter_EmptyOption"),this.control.AllowMultipleSelection&&(y="");else if(y.trim()=="")continue;if(it=this.control.DataListType=="Dynamic (with fixedValues)",b=!1,this.control.AllowMultipleSelection){for(v=0;v<this.SelectedValue_getAUX.length;v+=1)if(this.SelectedValue_getAUX[v]==y){b=!0;break}}else(nt&&!it||it&&u=="")&&(b=y==this.control.SelectedValue);if(!b||!e){h=d+"";ft=!1;h.length>100&&(h=h.substring(0,97).trim(),ft=!0);b?(ft&&(h+="..."),this.control.AllowMultipleSelection?l.setAttribute("sel","T"):(h="<strong>"+encodeHtmlEntities(h)+"<\/strong>",this.control.DropDownOptionsTitleSettingsIcons_IsFI?(ot=document.createElement("i"),ot.setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons.selo),l.appendChild(ot)):($(l).css("background-image","url("+gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons.SelectedOption)+")"),$(l).css("background-repeat","no-repeat"),$(l).css("background-position","10px 60%")))):u!=null&&u.length>0&&!this.control.FilterIsRange&&(this.control.FilterType=="Character"||it)?(g=WWP_removeAccents(h.toLowerCase()).indexOf(WWP_removeAccents(u.toLowerCase())),g>=0?h=encodeHtmlEntities(h.substring(0,g))+"<strong>"+encodeHtmlEntities(h.substring(g,g+u.length))+"<\/strong>"+encodeHtmlEntities(h.substring(g+u.length)):it&&(tt-=1,$(ut).css("display","none")),ft&&(h+="...")):h=encodeHtmlEntities(h);s<0?(st=0,n.Options.length==50&&(st=this.getOptionCount(y,t,i,r,f)),h=h.trim()+" ("+st+")"):n.OptionIndexes.length==n.Options.length&&(h=h.trim()+" ("+n.OptionIndexes[s]+")");lt.innerHTML=h;l.setAttribute("href",DDO_GetLocalURL());navigator.appVersion.toLowerCase().match("msie 8")||navigator.appVersion.toLowerCase().match("msie 7")||navigator.appVersion.toLowerCase().match("msie 9")||l.setAttribute("data-toggle","dropdown");this.control.AllowMultipleSelection&&(this.control.DropDownOptionsTitleSettingsIcons_IsFI?(ht=document.createElement("i"),ht.setAttribute("class",this.control.DropDownOptionsTitleSettingsIcons[b?"muls":"mul"]),l.appendChild(ht)):($(l).css("background-image","url("+gx.util.resolveUrl(this.control.DropDownOptionsTitleSettingsIcons[b?"MultiselSelOption":"MultiselOption"])+")"),$(l).css("background-repeat","no-repeat"),$(l).css("background-position","5px 60%")));c=this;$(l).on("click",function(n,t){return function(){var e,u,f;if(c.control.AllowMultipleSelection){if(e=this.getAttribute("sel")=="T",e){for(this.setAttribute("sel",""),u=-1,f=0;f<c.SelectedValue_getAUX.length;f+=1)if(c.SelectedValue_getAUX[f]==n){u=f;break}u>=0&&(c.SelectedValue_getAUX.splice(u,1),c.SelectedText_getAUX.splice(u,1))}else this.setAttribute("sel","T"),c.SelectedValue_getAUX.push(n),c.SelectedText_getAUX.push(t);c.control.DropDownOptionsTitleSettingsIcons_IsFI?$(this).find("i")[0].setAttribute("class",c.control.DropDownOptionsTitleSettingsIcons[e?"mul":"muls"]):$(this).css("background-image","url("+gx.util.resolveUrl(c.control.DropDownOptionsTitleSettingsIcons[e?"MultiselOption":"MultiselSelOption"])+")")}else c.SetActiveEventKey("<#Filter#>"),c.SetFilteredText($(i).val()),c.SetSelectedValue(n),c.SetSelectedText(t),c.control.FilterIsRange&&c.SetFilteredTextTo($(r).val())}}(y,d));if(this.control.AllowMultipleSelection)$(l).on("click",function(n){n.preventDefault();n.stopPropagation()});else if(this.control.OnOptionClicked)$(l).on("click",this.control.OnOptionClicked);l.appendChild(lt);ut.appendChild(l);b&&(this.control.AllowMultipleSelection||a.childNodes.length>0&&s>=this.minIndexForSelectedItemFirst)?(a.insertBefore(ut,a.childNodes[et]),this.control.AllowMultipleSelection&&et++):a.appendChild(ut)}}o&&(ct=document.createElement("li"),this.addLoadingOption(ct),a.appendChild(ct))}wwp.settings.columnsSelector.InfiniteScrolling&&!e&&(c=this,$(w).scroll(function(){a.childNodes.length>0&&$(t).is("[wwp-fetch-more]")&&$(w).find(">*:eq(0)").height()-$(w).height()-$(this).scrollTop()<=20&&($(t).attr("wwp-fetch-more",null),c.updateFilterList(t,i,r,!1,!0))}));e||(tt==0&&this.items_AddNoResultsFound(a),t.innerHTML="",w.appendChild(a),t.appendChild(w));this.control.TitleControlAlign=="Automatic"?WWP_dropdownAutoPosition(null,"#"+this.containerToDrawName,this.m_UlDropDown,this.m_triggerButton):this.control.TitleControlAlign=="Left"&&$(t).parent().css("margin-left","-"+($(t).parent().outerWidth()-$($(t).parent().parent().children()[0]).outerWidth())+"px")};this.SetActiveEventKey=function(n){n=="<#Filter#>"&&(this.control.SelectedFixedFilter="",this.control.IsM&&(this.control.MControl.SelectedColumnFixedFilter="",this.control.MControl.UpdateColPropValueFromDDOs("SelectedFixedFilter")));this.control.ActiveEventKey=n;this.control.IsM&&(this.control.MControl.ActiveEventKey=n,this.control.MControl.SelectedColumn=this.control.MName)};this.SetActiveEventKeyFixedFilter_M=function(){var n="<#Filter#>";this.control.ActiveEventKey=n;this.control.MControl.ActiveEventKey=n;this.control.MControl.SelectedColumn=this.control.MName;this.control.MControl.SelectedColumnFixedFilter=this.control.SelectedFixedFilter;this.control.SelectedFixedFilter!="CFS"&&this.control.MControl.UpdateColPropValueFromDDOs("SelectedFixedFilter")};this.SetFilteredText=function(n){this.control.FilteredText_get=n!=null?n:"";this.control.FilteredText_set=this.control.FilteredText_get;this.control.FilteredText=this.control.FilteredText_get;this.control.IsM&&(this.control.MControl.FilteredText_get=this.control.FilteredText_get,this.control.MControl.UpdateColPropValueFromDDOs("FilteredText_set"))};this.SetFilteredTextTo=function(n){this.control.FilteredTextTo_get=n!=null?n:"";this.control.FilteredTextTo_set=this.control.FilteredTextTo_get;this.control.FilteredTextTo=this.control.FilteredTextTo_get;this.control.IsM&&(this.control.MControl.FilteredTextTo_get=this.control.FilteredTextTo_get,this.control.MControl.UpdateColPropValueFromDDOs("FilteredTextTo_set"))};this.SetSelectedValue=function(n){this.control.SelectedValue_get=n!=null?n:"";this.control.SelectedValue_set=this.control.SelectedValue_get;this.control.SelectedValue=this.control.SelectedValue_get;this.control.IsM&&(this.control.MControl.SelectedValue_get=this.control.SelectedValue_get,this.control.MControl.UpdateColPropValueFromDDOs("SelectedValue_set"))};this.SetSelectedText=function(n){this.control.SelectedText_get=n!=null?n:"";this.control.SelectedText_set=this.control.SelectedText_get;this.control.SelectedText=this.control.SelectedText_get;this.control.IsM&&(this.control.MControl.SelectedText_get=this.control.SelectedText_get,this.control.MControl.UpdateColPropValueFromDDOs("SelectedText_set"))};this.ShowHideControl=function(){$("#"+this.containerToDrawName).css("display",this.control.Visible?"inline-block":"none")};this.IsActionGroupInFS=function(){return!(this.control.IsM&&this.control.MControl.IsFS)&&this.control.ContainerName!=null&&this.control.DesignContainerName!=null&&this.control.ContainerName.length==this.control.DesignContainerName.length+5&&this.control.ContainerName[this.control.ContainerName.length-5]=="_"}}function encodeHtmlEntities(n){return n.replace(/[\u00A0-\u9999<>\&]/gim,function(n){return"&#"+n.charCodeAt(0)+";"})}function createCookie(n,t,i){i||(i=365);var r="_"+(location.pathname.split("/").length>=3?location.hostname+"_"+location.pathname.split("/")[1]:location.hostname);gx.http.setCookie(n+r,t,i,!1,"/")}function readCookie(n){for(var t,f="_"+(location.pathname.split("/").length>=3?location.hostname+"_"+location.pathname.split("/")[1]:location.hostname),r=n+f+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1,t.length);if(t.indexOf(r)==0)return unescape(t.substring(r.length,t.length))}return null}function DDO_GetLocalURL(){return"#"}function WWP_FixBooleanProperty(n){return n==!0||n=="true"}function WWP_removeAccents(n){return n==null?"":n.normalize!=null?n.normalize("NFD").replace(/[\u0300-\u036f]/g,""):n}function WWP_transformParametersStyleToPositional(n){if(n!=null&&n.indexOf("=")>0&&n.indexOf("?")>0){var t=n.substring(n.indexOf("?")+1);for(n=n.substring(0,n.indexOf("?")+1);t.indexOf("=")>=0;)t=t.substring(t.indexOf("=")+1),t.indexOf("&")>=0?(n+=t.substring(0,t.indexOf("&"))+",",t=t.substring(t.indexOf("&")+1)):n+=t}return n};$(window).one('load',function(){WWP_VV([['DVPaginationBar','15.4.0'],['GXBootstrap.SidebarMenu','15.2.9'],['GXBootstrap.Panel_AL','15.3.7'],['GXBootstrap.DDOGridTitleSettings','15.0.1'],['GXBootstrap.TagsInput','15.0.1'],['GXBootstrap.Panel','15.3.7'],['GXBootstrap.DDOGridColumnsSelector','15.1.0'],['GXBootstrap.DDOGridTitleSettingsM','15.4.0'],['GXBootstrap.DDOExtendedCombo','15.3.6'],['GXBootstrap.DropDownOptions','15.2.1'],['GXBootstrap.ConfirmPanel','15.4.2'],['GXBootstrap.DDComponent','15.2.8'],['DVHorizontalMenu','15.4.1'],['GXBootstrap.TabsPanel','14.1000'],['GXBootstrap.DDORegular','15.2.12']]);});